// koffee 1.4.0

/*
000   000  000   000  000   000         0000000   00000000   00000000   
000 0 000   000 000   000 0 000        000   000  000   000  000   000  
000000000    00000    000000000        000000000  00000000   00000000   
000   000   000 000   000   000        000   000  000        000        
00     00  000   000  00     00        000   000  000        000
 */
var Menu, _, about, action, app, args, childp, electron, getSwitch, karg, klog, moveWindow, onAppSwitch, os, pkg, post, prefs, ref, showAbout, slash, swtch, tray, wc;

ref = require('kxk'), post = ref.post, prefs = ref.prefs, about = ref.about, slash = ref.slash, childp = ref.childp, karg = ref.karg, klog = ref.klog, os = ref.os, _ = ref._;

wc = require('./wc');

pkg = require('../package.json');

electron = require('electron');

app = electron.app;

Menu = electron.Menu;

tray = null;

swtch = null;

args = karg("wxw\n    debug  . ? log debug    . = false . - D\n\nversion  " + pkg.version);

post.on('winlog', function(text) {
    return klog(">>> " + text);
});

action = function(act) {
    switch (act) {
        case 'maximize':
            return console.log(wc('maximize', 'top'));
        case 'minimize':
            return console.log(wc('minimize', 'top'));
        case 'taskbar':
            return console.log(wc('taskbar', 'toggle'));
        case 'close':
            return console.log(wc('close', 'top'));
        case 'screenzoom':
            return require('./zoom').start({
                debug: args.debug
            });
        case 'appswitch':
            return onAppSwitch();
        default:
            return moveWindow(act);
    }
};

moveWindow = function(dir) {
    var ar, b, base, d, h, info, ref1, sb, screen, sl, sr, st, w, wr, x, y;
    screen = wc('screen', 'user');
    ar = {
        w: screen.width,
        h: screen.height
    };
    if (info = wc('info', 'top')[0]) {
        base = slash.base(info.path);
        if (base === 'kachel' || base === 'kappo') {
            return;
        }
        b = 0;
        if (os.platform() === 'win32') {
            if (base === 'electron' || base === 'ko' || base === 'konrad' || base === 'clippo' || base === 'klog' || base === 'kaligraf' || base === 'kalk' || base === 'uniko' || base === 'knot' || base === 'space' || base === 'ruler') {
                b = 0;
            } else if (base === 'devenv') {
                b = -1;
            } else {
                b = 10;
            }
        }
        wr = {
            x: info.x,
            y: info.y,
            w: info.width,
            h: info.height
        };
        d = 2 * b;
        ref1 = (function() {
            switch (dir) {
                case 'left':
                    return [-b, 0, ar.w / 2 + d, ar.h + b];
                case 'right':
                    return [ar.w / 2 - b, 0, ar.w / 2 + d, ar.h + b];
                case 'down':
                    return [ar.w / 4 - b, 0, ar.w / 2 + d, ar.h + b];
                case 'up':
                    return [ar.w / 6 - b, 0, 2 / 3 * ar.w + d, ar.h + b];
                case 'topleft':
                    return [-b, 0, ar.w / 3 + d, ar.h / 2];
                case 'top':
                    return [ar.w / 3 - b, 0, ar.w / 3 + d, ar.h / 2];
                case 'topright':
                    return [2 / 3 * ar.w - b, 0, ar.w / 3 + d, ar.h / 2];
                case 'botleft':
                    return [-b, ar.h / 2 - b, ar.w / 3 + d, ar.h / 2 + d];
                case 'bot':
                    return [ar.w / 3 - b, ar.h / 2 - b, ar.w / 3 + d, ar.h / 2 + d];
                case 'botright':
                    return [2 / 3 * ar.w - b, ar.h / 2 - b, ar.w / 3 + d, ar.h / 2 + d];
            }
        })(), x = ref1[0], y = ref1[1], w = ref1[2], h = ref1[3];
        sl = 20 > Math.abs(wr.x - x);
        sr = 20 > Math.abs(wr.x + wr.w - (x + w));
        st = 20 > Math.abs(wr.y - y);
        sb = 20 > Math.abs(wr.y + wr.h - (y + h));
        if (sl && sr && st && sb) {
            switch (dir) {
                case 'left':
                    w = ar.w / 4 + d;
                    break;
                case 'right':
                    w = ar.w / 4 + d;
                    x = 3 * ar.w / 4 - b;
                    break;
                case 'down':
                    h = ar.h / 2 + d;
                    y = ar.h / 2 - b;
                    break;
                case 'up':
                    w = ar.w + d;
                    x = -b;
            }
        }
        klog('wxw bounds', info.id, parseInt(x), parseInt(y), parseInt(w), parseInt(h));
        return wc('bounds', info.id, parseInt(x), parseInt(y), parseInt(w), parseInt(h));
    }
};

getSwitch = function() {
    if (!swtch || swtch.isDestroyed()) {
        swtch = require('./switch').start();
        swtch.on('close', function() {
            return swtch = null;
        });
    }
    return swtch;
};

onAppSwitch = function() {
    getSwitch();
    return post.toWin(swtch.id, 'nextApp');
};

showAbout = function() {
    return about({
        img: __dirname + "/../img/about.png",
        background: "#222",
        size: 300,
        pkg: pkg
    });
};

post.on('showAbout', showAbout);

app.on('window-all-closed', function(event) {
    return event.preventDefault();
});

app.on('ready', function() {
    var a, i, keys, len, ref1;
    tray = new electron.Tray(__dirname + "/../img/menu.png");
    tray.on('click', function() {
        return getSwitch().show();
    });
    tray.on('double-click', function() {
        app.exit(0);
        return process.exit(0);
    });
    tray.setContextMenu(Menu.buildFromTemplate([
        {
            label: "Quit",
            click: function() {
                app.exit(0);
                return process.exit(0);
            }
        }, {
            label: "About",
            click: showAbout
        }
    ]));
    keys = {
        left: 'alt+ctrl+left',
        right: 'alt+ctrl+right',
        up: 'alt+ctrl+up',
        down: 'alt+ctrl+down',
        topleft: 'alt+ctrl+1',
        botleft: 'alt+ctrl+2',
        topright: 'alt+ctrl+3',
        botright: 'alt+ctrl+4',
        top: 'alt+ctrl+5',
        bot: 'alt+ctrl+6',
        minimize: 'alt+ctrl+m',
        close: 'alt+ctrl+w',
        taskbar: 'alt+ctrl+t',
        appswitch: 'ctrl+tab',
        screenzoom: 'alt+z'
    };
    prefs.init({
        defaults: keys
    });
    ref1 = _.keys(keys);
    for (i = 0, len = ref1.length; i < len; i++) {
        a = ref1[i];
        electron.globalShortcut.register(prefs.get(a), (function(a) {
            return function() {
                return action(a);
            };
        })(a));
    }
    getSwitch();
    return app.on('activate', function() {
        return onAppSwitch();
    });
});

if (app.requestSingleInstanceLock != null) {
    if (app.requestSingleInstanceLock()) {
        app.on('second-instance', function() {
            return getSwitch().show();
        });
    } else {
        app.quit();
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxNQUEyRCxPQUFBLENBQVEsS0FBUixDQUEzRCxFQUFFLGVBQUYsRUFBUSxpQkFBUixFQUFlLGlCQUFmLEVBQXNCLGlCQUF0QixFQUE2QixtQkFBN0IsRUFBcUMsZUFBckMsRUFBMkMsZUFBM0MsRUFBaUQsV0FBakQsRUFBcUQ7O0FBRXJELEVBQUEsR0FBVyxPQUFBLENBQVEsTUFBUjs7QUFDWCxHQUFBLEdBQVcsT0FBQSxDQUFRLGlCQUFSOztBQUNYLFFBQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFFWCxHQUFBLEdBQVcsUUFBUSxDQUFDOztBQUNwQixJQUFBLEdBQVcsUUFBUSxDQUFDOztBQUNwQixJQUFBLEdBQVc7O0FBQ1gsS0FBQSxHQUFXOztBQUVYLElBQUEsR0FBTyxJQUFBLENBQUssK0RBQUEsR0FJRCxHQUFHLENBQUMsT0FKUjs7QUFPUCxJQUFJLENBQUMsRUFBTCxDQUFRLFFBQVIsRUFBa0IsU0FBQyxJQUFEO1dBQVUsSUFBQSxDQUFLLE1BQUEsR0FBUyxJQUFkO0FBQVYsQ0FBbEI7O0FBUUEsTUFBQSxHQUFTLFNBQUMsR0FBRDtBQUlMLFlBQU8sR0FBUDtBQUFBLGFBQ1MsVUFEVDttQkFDa0IsT0FBQSxDQUFTLEdBQVQsQ0FBYSxFQUFBLENBQUcsVUFBSCxFQUFjLEtBQWQsQ0FBYjtBQURsQixhQUVTLFVBRlQ7bUJBRWtCLE9BQUEsQ0FBUyxHQUFULENBQWEsRUFBQSxDQUFHLFVBQUgsRUFBYyxLQUFkLENBQWI7QUFGbEIsYUFHUyxTQUhUO21CQUdpQixPQUFBLENBQVUsR0FBVixDQUFjLEVBQUEsQ0FBRyxTQUFILEVBQWMsUUFBZCxDQUFkO0FBSGpCLGFBSVMsT0FKVDttQkFJZSxPQUFBLENBQVksR0FBWixDQUFnQixFQUFBLENBQUcsT0FBSCxFQUFjLEtBQWQsQ0FBaEI7QUFKZixh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QUMsQ0FBRDttQkFBTyxTQUFBO3VCQUFHLE1BQUEsQ0FBTyxDQUFQO1lBQUg7UUFBUCxDQUFELENBQUEsQ0FBcUIsQ0FBckIsQ0FBL0M7QUFESjtJQUdBLFNBQUEsQ0FBQTtXQUVBLEdBQUcsQ0FBQyxFQUFKLENBQU8sVUFBUCxFQUFrQixTQUFBO2VBQUcsV0FBQSxDQUFBO0lBQUgsQ0FBbEI7QUF4Q1csQ0FBZjs7QUEwQ0EsSUFBRyxxQ0FBSDtJQUVJLElBQUcsR0FBRyxDQUFDLHlCQUFKLENBQUEsQ0FBSDtRQUNJLEdBQUcsQ0FBQyxFQUFKLENBQU8saUJBQVAsRUFBeUIsU0FBQTttQkFDckIsU0FBQSxDQUFBLENBQVcsQ0FBQyxJQUFaLENBQUE7UUFEcUIsQ0FBekIsRUFESjtLQUFBLE1BQUE7UUFJSSxHQUFHLENBQUMsSUFBSixDQUFBLEVBSko7S0FGSiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgICAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAwICAgXG4wMDAgMCAwMDAgICAwMDAgMDAwICAgMDAwIDAgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbjAwMDAwMDAwMCAgICAwMDAwMCAgICAwMDAwMDAwMDAgICAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwMCAgIFxuMDAwICAgMDAwICAgMDAwIDAwMCAgIDAwMCAgIDAwMCAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAgIDAwMCAgICAgICAgXG4wMCAgICAgMDAgIDAwMCAgIDAwMCAgMDAgICAgIDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAgMDAwICAgICAgICBcbiMjI1xuXG57IHBvc3QsIHByZWZzLCBhYm91dCwgc2xhc2gsIGNoaWxkcCwga2FyZywga2xvZywgb3MsIF8gfSA9IHJlcXVpcmUgJ2t4aydcblxud2MgICAgICAgPSByZXF1aXJlICcuL3djJ1xucGtnICAgICAgPSByZXF1aXJlICcuLi9wYWNrYWdlLmpzb24nXG5lbGVjdHJvbiA9IHJlcXVpcmUgJ2VsZWN0cm9uJ1xuXG5hcHAgICAgICA9IGVsZWN0cm9uLmFwcFxuTWVudSAgICAgPSBlbGVjdHJvbi5NZW51XG50cmF5ICAgICA9IG51bGxcbnN3dGNoICAgID0gbnVsbFxuXG5hcmdzID0ga2FyZyBcIlwiXCJcbnd4d1xuICAgIGRlYnVnICAuID8gbG9nIGRlYnVnICAgIC4gPSBmYWxzZSAuIC0gRFxuXG52ZXJzaW9uICAje3BrZy52ZXJzaW9ufVxuXCJcIlwiXG5cbnBvc3Qub24gJ3dpbmxvZycsICh0ZXh0KSAtPiBrbG9nIFwiPj4+IFwiICsgdGV4dFxuXG4jICAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4jIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgXG4jIDAwMDAwMDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgXG4jIDAwMCAgIDAwMCAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgXG4jIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG5cbmFjdGlvbiA9IChhY3QpIC0+XG5cbiAgICAjIGtsb2cgJ2FjdCcgYWN0XG4gICAgXG4gICAgc3dpdGNoIGFjdFxuICAgICAgICB3aGVuICdtYXhpbWl6ZScgICB0aGVuIGxvZyB3YyAnbWF4aW1pemUnICd0b3AnXG4gICAgICAgIHdoZW4gJ21pbmltaXplJyAgIHRoZW4gbG9nIHdjICdtaW5pbWl6ZScgJ3RvcCdcbiAgICAgICAgd2hlbiAndGFza2JhcicgICAgdGhlbiBsb2cgd2MgJ3Rhc2tiYXInICAndG9nZ2xlJ1xuICAgICAgICB3aGVuICdjbG9zZScgICAgICB0aGVuIGxvZyB3YyAnY2xvc2UnICAgICd0b3AnXG4gICAgICAgIHdoZW4gJ3NjcmVlbnpvb20nIHRoZW4gcmVxdWlyZSgnLi96b29tJykuc3RhcnQgZGVidWc6YXJncy5kZWJ1Z1xuICAgICAgICB3aGVuICdhcHBzd2l0Y2gnICB0aGVuIG9uQXBwU3dpdGNoKClcbiAgICAgICAgZWxzZSBtb3ZlV2luZG93IGFjdFxuICAgICAgICBcbiMgMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgXG4jIDAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwIDAwMCAgIDAwMDAwMDAgICBcbiMgMDAwIDAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIFxuIyAwMDAgICAwMDAgICAwMDAwMDAwICAgICAgIDAgICAgICAwMDAwMDAwMCAgXG5cbm1vdmVXaW5kb3cgPSAoZGlyKSAtPlxuICAgIFxuICAgIHNjcmVlbiA9IHdjICdzY3JlZW4nICd1c2VyJ1xuICAgIFxuICAgIGFyID0gdzpzY3JlZW4ud2lkdGgsIGg6c2NyZWVuLmhlaWdodFxuICAgIFxuICAgIGlmIGluZm8gPSB3YygnaW5mbycgJ3RvcCcpWzBdXG4gICAgICAgIFxuICAgICAgICBiYXNlID0gc2xhc2guYmFzZSBpbmZvLnBhdGhcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBpZiBiYXNlIGluIFsna2FjaGVsJyAna2FwcG8nXVxuICAgICAgICBcbiAgICAgICAgYiA9IDBcbiAgICAgICAgaWYgb3MucGxhdGZvcm0oKSA9PSAnd2luMzInXG4gICAgICAgICAgICBpZiBiYXNlIGluIFsnZWxlY3Ryb24nICdrbycgJ2tvbnJhZCcgJ2NsaXBwbycgJ2tsb2cnICdrYWxpZ3JhZicgJ2thbGsnICd1bmlrbycgJ2tub3QnICdzcGFjZScgJ3J1bGVyJ11cbiAgICAgICAgICAgICAgICBiID0gMCAgIyBzYW5lIHdpbmRvdyBib3JkZXJcbiAgICAgICAgICAgIGVsc2UgaWYgYmFzZSBpbiBbJ2RldmVudiddXG4gICAgICAgICAgICAgICAgYiA9IC0xICAjIHd0Zj9cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBiID0gMTAgIyB0cmFuc3BhcmVudCB3aW5kb3cgYm9yZGVyXG4gICAgICAgIFxuICAgICAgICB3ciA9IHg6aW5mby54LCB5OmluZm8ueSwgdzppbmZvLndpZHRoLCBoOmluZm8uaGVpZ2h0XG4gICAgICAgIGQgPSAyKmJcbiAgICAgICAgW3gseSx3LGhdID0gc3dpdGNoIGRpclxuICAgICAgICAgICAgd2hlbiAnbGVmdCcgICAgIHRoZW4gWy1iLCAgICAgICAgIDAsICAgICAgICBhci53LzIrZCwgYXIuaCtiXVxuICAgICAgICAgICAgd2hlbiAncmlnaHQnICAgIHRoZW4gW2FyLncvMi1iLCAgIDAsICAgICAgICBhci53LzIrZCwgYXIuaCtiXVxuICAgICAgICAgICAgd2hlbiAnZG93bicgICAgIHRoZW4gW2FyLncvNC1iLCAgIDAsICAgICAgICBhci53LzIrZCwgYXIuaCtiXVxuICAgICAgICAgICAgd2hlbiAndXAnICAgICAgIHRoZW4gW2FyLncvNi1iLCAgIDAsICAgIDIvMyphci53K2QsICAgYXIuaCtiXVxuICAgICAgICAgICAgd2hlbiAndG9wbGVmdCcgIHRoZW4gWy1iLCAgICAgICAgIDAsICAgICAgICBhci53LzMrZCwgYXIuaC8yXVxuICAgICAgICAgICAgd2hlbiAndG9wJyAgICAgIHRoZW4gW2FyLncvMy1iLCAgIDAsICAgICAgICBhci53LzMrZCwgYXIuaC8yXVxuICAgICAgICAgICAgd2hlbiAndG9wcmlnaHQnIHRoZW4gWzIvMyphci53LWIsIDAsICAgICAgICBhci53LzMrZCwgYXIuaC8yXVxuICAgICAgICAgICAgd2hlbiAnYm90bGVmdCcgIHRoZW4gWy1iLCAgICAgICAgIGFyLmgvMi1iLCBhci53LzMrZCwgYXIuaC8yK2RdXG4gICAgICAgICAgICB3aGVuICdib3QnICAgICAgdGhlbiBbYXIudy8zLWIsICAgYXIuaC8yLWIsIGFyLncvMytkLCBhci5oLzIrZF1cbiAgICAgICAgICAgIHdoZW4gJ2JvdHJpZ2h0JyB0aGVuIFsyLzMqYXIudy1iLCBhci5oLzItYiwgYXIudy8zK2QsIGFyLmgvMitkXVxuICAgICAgICBcbiAgICAgICAgc2wgPSAyMCA+IE1hdGguYWJzIHdyLnggLSAgeFxuICAgICAgICBzciA9IDIwID4gTWF0aC5hYnMgd3IueCt3ci53IC0gKHgrdylcbiAgICAgICAgc3QgPSAyMCA+IE1hdGguYWJzIHdyLnkgLSAgeVxuICAgICAgICBzYiA9IDIwID4gTWF0aC5hYnMgd3IueSt3ci5oIC0gKHkraClcbiAgICAgICAgXG4gICAgICAgIGlmIHNsIGFuZCBzciBhbmQgc3QgYW5kIHNiXG4gICAgICAgICAgICBzd2l0Y2ggZGlyXG4gICAgICAgICAgICAgICAgd2hlbiAnbGVmdCcgIHRoZW4gdyA9IGFyLncvNCtkXG4gICAgICAgICAgICAgICAgd2hlbiAncmlnaHQnIHRoZW4gdyA9IGFyLncvNCtkOyB4ID0gMyphci53LzQtYlxuICAgICAgICAgICAgICAgIHdoZW4gJ2Rvd24nICB0aGVuIGggPSBhci5oLzIrZDsgeSA9IGFyLmgvMi1iXG4gICAgICAgICAgICAgICAgd2hlbiAndXAnICAgIHRoZW4gdyA9IGFyLncrZDsgICB4ID0gLWJcbiAgICAgICAgXG4gICAgICAgICMga2xvZyBkaXIsIGluZm8uaWQsIHBhcnNlSW50KHgpLCBwYXJzZUludCh5KSwgcGFyc2VJbnQodyksIHBhcnNlSW50KGgpLCBpbmZvLnBhdGhcbiAgICAgICAga2xvZyAnd3h3IGJvdW5kcycgaW5mby5pZCwgcGFyc2VJbnQoeCksIHBhcnNlSW50KHkpLCBwYXJzZUludCh3KSwgcGFyc2VJbnQoaClcbiAgICAgICAgd2MgJ2JvdW5kcycgaW5mby5pZCwgcGFyc2VJbnQoeCksIHBhcnNlSW50KHkpLCBwYXJzZUludCh3KSwgcGFyc2VJbnQoaClcblxuIyAgMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4jIDAwMCAgICAgICAwMDAgMCAwMDAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICBcbiMgMDAwMDAwMCAgIDAwMDAwMDAwMCAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAwMDAwMDAgIFxuIyAgICAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgXG4jIDAwMDAwMDAgICAwMCAgICAgMDAgIDAwMCAgICAgMDAwICAgICAgMDAwMDAwMCAgMDAwICAgMDAwICBcblxuZ2V0U3dpdGNoID0gLT5cbiAgICBcbiAgICBpZiBub3Qgc3d0Y2ggb3Igc3d0Y2guaXNEZXN0cm95ZWQoKVxuICAgICAgICBzd3RjaCA9IHJlcXVpcmUoJy4vc3dpdGNoJykuc3RhcnQoKVxuICAgICAgICBzd3RjaC5vbiAnY2xvc2UnIC0+IHN3dGNoID0gbnVsbFxuICAgIHN3dGNoXG4gICAgICAgIFxub25BcHBTd2l0Y2ggPSAtPiBcblxuICAgIGdldFN3aXRjaCgpXG4gICAgcG9zdC50b1dpbiBzd3RjaC5pZCwgJ25leHRBcHAnXG5cbiMgIDAwMDAwMDAgICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMDAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4jIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuIyAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgICAgIDAwMCAgICAgXG5cbnNob3dBYm91dCA9IC0+XG4gICAgXG4gICAgYWJvdXQgXG4gICAgICAgIGltZzogXCIje19fZGlybmFtZX0vLi4vaW1nL2Fib3V0LnBuZ1wiXG4gICAgICAgIGJhY2tncm91bmQ6IFwiIzIyMlwiXG4gICAgICAgIHNpemU6IDMwMFxuICAgICAgICBwa2c6IHBrZ1xuXG5wb3N0Lm9uICdzaG93QWJvdXQnIHNob3dBYm91dFxuXG5hcHAub24gJ3dpbmRvdy1hbGwtY2xvc2VkJyAoZXZlbnQpIC0+IGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgXG4jIDAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAgICAwMDBcbiMgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAgMDAwIFxuIyAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgICAwMDAwMCAgXG4jIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICBcbiMgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgICAgIDAwMCAgIFxuXG5hcHAub24gJ3JlYWR5JyAtPlxuICAgIFxuICAgIHRyYXkgPSBuZXcgZWxlY3Ryb24uVHJheSBcIiN7X19kaXJuYW1lfS8uLi9pbWcvbWVudS5wbmdcIlxuICAgIHRyYXkub24gJ2NsaWNrJyAtPiBnZXRTd2l0Y2goKS5zaG93KClcbiAgICB0cmF5Lm9uICdkb3VibGUtY2xpY2snIC0+IGFwcC5leGl0IDA7IHByb2Nlc3MuZXhpdCAwXG4gICAgXG4gICAgdHJheS5zZXRDb250ZXh0TWVudSBNZW51LmJ1aWxkRnJvbVRlbXBsYXRlIFtcbiAgICAgICAgbGFiZWw6IFwiUXVpdFwiXG4gICAgICAgIGNsaWNrOiAtPiBhcHAuZXhpdCAwOyBwcm9jZXNzLmV4aXQgMFxuICAgICxcbiAgICAgICAgbGFiZWw6IFwiQWJvdXRcIlxuICAgICAgICBjbGljazogc2hvd0Fib3V0XG4gICAgXVxuICAgIFxuICAgICMgYXBwLmRvY2s/LmhpZGUoKVxuICAgIFxuICAgIGtleXMgPSBcbiAgICAgICAgbGVmdDogICAgICAgJ2FsdCtjdHJsK2xlZnQnXG4gICAgICAgIHJpZ2h0OiAgICAgICdhbHQrY3RybCtyaWdodCdcbiAgICAgICAgdXA6ICAgICAgICAgJ2FsdCtjdHJsK3VwJ1xuICAgICAgICBkb3duOiAgICAgICAnYWx0K2N0cmwrZG93bidcbiAgICAgICAgdG9wbGVmdDogICAgJ2FsdCtjdHJsKzEnXG4gICAgICAgIGJvdGxlZnQ6ICAgICdhbHQrY3RybCsyJ1xuICAgICAgICB0b3ByaWdodDogICAnYWx0K2N0cmwrMydcbiAgICAgICAgYm90cmlnaHQ6ICAgJ2FsdCtjdHJsKzQnXG4gICAgICAgIHRvcDogICAgICAgICdhbHQrY3RybCs1J1xuICAgICAgICBib3Q6ICAgICAgICAnYWx0K2N0cmwrNidcbiAgICAgICAgbWluaW1pemU6ICAgJ2FsdCtjdHJsK20nXG4gICAgICAgIGNsb3NlOiAgICAgICdhbHQrY3RybCt3J1xuICAgICAgICB0YXNrYmFyOiAgICAnYWx0K2N0cmwrdCdcbiAgICAgICAgYXBwc3dpdGNoOiAgJ2N0cmwrdGFiJ1xuICAgICAgICBzY3JlZW56b29tOiAnYWx0K3onXG4gICAgICAgIFxuICAgIHByZWZzLmluaXQgZGVmYXVsdHM6a2V5c1xuICAgIFxuICAgIGZvciBhIGluIF8ua2V5cyBrZXlzXG4gICAgICAgIGVsZWN0cm9uLmdsb2JhbFNob3J0Y3V0LnJlZ2lzdGVyIHByZWZzLmdldChhKSwgKChhKSAtPiAtPiBhY3Rpb24gYSkoYSlcbiAgICAgICAgXG4gICAgZ2V0U3dpdGNoKClcbiAgICBcbiAgICBhcHAub24gJ2FjdGl2YXRlJyAtPiBvbkFwcFN3aXRjaCgpXG4gIFxuaWYgYXBwLnJlcXVlc3RTaW5nbGVJbnN0YW5jZUxvY2s/XG4gICAgXG4gICAgaWYgYXBwLnJlcXVlc3RTaW5nbGVJbnN0YW5jZUxvY2soKVxuICAgICAgICBhcHAub24gJ3NlY29uZC1pbnN0YW5jZScgLT4gXG4gICAgICAgICAgICBnZXRTd2l0Y2goKS5zaG93KClcbiAgICBlbHNlXG4gICAgICAgIGFwcC5xdWl0KClcbiAgICAgICAgICAgIFxuICAgICJdfQ==
//# sourceURL=../coffee/app.coffee