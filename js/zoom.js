// koffee 1.3.0
var $, borderScroll, borderTimer, childp, clamp, createWindow, doScroll, done, drag, electron, init, karg, klog, kpos, mapRange, offset, onDblClick, onDragMove, onDragStart, onDragStop, onMouseMove, onWheel, post, prefs, ref, scale, screenshotFile, screenshotPath, scrollSpeed, slash, start, transform, wc;

ref = require('kxk'), childp = ref.childp, post = ref.post, karg = ref.karg, slash = ref.slash, drag = ref.drag, prefs = ref.prefs, clamp = ref.clamp, kpos = ref.kpos, klog = ref.klog, $ = ref.$;

wc = require('./wc');

electron = require('electron');

screenshotPath = function() {
    return slash.resolve(slash.join(prefs.get('screenhotFolder', slash.resolve("~/Desktop")), 'screenshot.png'));
};

screenshotFile = function() {
    return slash.unslash(screenshotPath());
};

start = function(opt) {
    if (opt == null) {
        opt = {};
    }
    wc('screenshot', screenshotFile());
    return createWindow(opt);
};

createWindow = function(opt) {
    var data, html, pngFile, vh, vw, win;
    vw = electron.screen.getPrimaryDisplay().workAreaSize.width;
    vh = electron.screen.getPrimaryDisplay().workAreaSize.height;
    win = new electron.BrowserWindow({
        backgroundColor: '#00000000',
        transparent: true,
        preloadWindow: true,
        x: 0,
        y: 0,
        width: vw,
        height: vh,
        hasShadow: false,
        resizable: false,
        frame: false,
        thickFrame: false,
        show: true,
        fullscreen: !opt.debug,
        webPreferences: {
            nodeIntegration: true,
            webSecurity: false
        }
    });
    pngFile = slash.fileUrl(screenshotPath());
    klog('pngFile', pngFile);
    html = "<head>\n<style type=\"text/css\">\n    body {\n        overflow:       hidden;\n        margin:         1px;\n        border:         none;\n    }\n    img {\n        position:       absolute;\n        left:           0;\n        top:            0;\n        width:          " + vw + "px;\n        height:         " + vh + "px;\n    }\n</style>\n</head>\n<body>\n<img class=\"screenshot\" tabindex=0 src=\"" + pngFile + "\"/>\n<script>\n    var pth = process.resourcesPath + \"/app/js/zoom.js\";\n    if (process.resourcesPath.indexOf(\"node_modules\\\\electron\\\\dist\\\\resources\")>=0) { pth = process.cwd() + \"/js/zoom.js\"; }\n    console.log(pth, process.resourcesPath);\n    require(pth).init();\n</script>\n</body>";
    data = "data:text/html;charset=utf-8," + encodeURI(html);
    win.loadURL(data, {
        baseURLForDataURL: slash.fileUrl(__dirname + '/index.html')
    });
    win.debug = opt.debug;
    win.on('ready-to-show', function() {});
    if (opt.debug) {
        win.webContents.openDevTools();
    } else {
        win.maximize();
    }
    return win;
};

done = function() {
    var win;
    win = electron.remote.getCurrentWindow();
    win.close();
    if (win.debug) {
        return electron.remote.app.exit(0);
    }
};

init = function() {
    var a, win;
    win = electron.remote.getCurrentWindow();
    a = $('.screenshot');
    a.ondblclick = onDblClick;
    a.onmousemove = onMouseMove;
    a.onmousewheel = onWheel;
    a.onkeydown = done;
    if (!win.debug) {
        a.onblur = done;
    }
    new drag({
        target: a,
        onStart: onDragStart,
        onMove: onDragMove,
        onStop: onDragStop
    });
    return a.focus();
};

scale = 1.0;

offset = kpos(0, 0);

transform = function() {
    var a, ox, oy, vh, vw;
    vw = electron.remote.screen.getPrimaryDisplay().workAreaSize.width;
    vh = electron.remote.screen.getPrimaryDisplay().workAreaSize.height;
    a = $('.screenshot');
    scale = clamp(1, 20, scale);
    ox = vw * (scale - 1) / (2 * scale);
    oy = vh * (scale - 1) / (2 * scale);
    offset.x = clamp(-ox, ox, offset.x);
    offset.y = clamp(-oy, oy, offset.y);
    return a.style.transform = "scaleX(" + scale + ") scaleY(" + scale + ") translateX(" + offset.x + "px) translateY(" + offset.y + "px)";
};

onDblClick = function(event) {
    scale = 1;
    return transform();
};

onWheel = function(event) {
    var mp, newPos, newScale, oldPos, scaleFactor, vh, vw;
    scaleFactor = 1 - event.deltaY / 400.0;
    newScale = clamp(1, 20, scale * scaleFactor);
    vw = electron.remote.screen.getPrimaryDisplay().workAreaSize.width;
    vh = electron.remote.screen.getPrimaryDisplay().workAreaSize.height;
    mp = kpos(event).minus(kpos(vw, vh).times(0.5));
    oldPos = offset.plus(kpos(mp).times(1 / scale));
    newPos = offset.plus(kpos(mp).times(1 / newScale));
    offset.add(newPos.minus(oldPos));
    scale *= scaleFactor;
    return transform();
};

borderTimer = null;

onMouseMove = function(event) {
    if (!borderTimer) {
        return borderScroll();
    }
};

mapRange = function(value, valueRange, targetRange) {
    var clampedValue, relativeValue, targetWidth, valueWidth;
    targetWidth = targetRange[1] - targetRange[0];
    valueWidth = valueRange[1] - valueRange[0];
    clampedValue = clamp(valueRange[0], valueRange[1], value);
    relativeValue = (clampedValue - valueRange[0]) / valueWidth;
    return targetRange[0] + targetWidth * relativeValue;
};

scrollSpeed = 0;

doScroll = function() {
    var ms;
    transform();
    ms = mapRange(scrollSpeed, [0, 1], [1000 / 10, 1000 / 30]);
    return borderTimer = setTimeout(borderScroll, ms);
};

borderScroll = function() {
    var border, direction, mousePos, scroll;
    clearTimeout(borderTimer);
    borderTimer = null;
    mousePos = kpos(wc('mouse'));
    scroll = false;
    border = 200;
    direction = kpos(vw, vh).times(0.5).to(mousePos).mul(kpos(1 / vw, 1 / vh)).times(-1);
    if (mousePos.x < border) {
        scrollSpeed = (border - mousePos.x) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    } else if (mousePos.x > vw - border) {
        scrollSpeed = (border - (vw - mousePos.x)) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    }
    if (mousePos.y < border) {
        scrollSpeed = (border - mousePos.y) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    } else if (mousePos.y > vh - border) {
        scrollSpeed = (border - (vh - mousePos.y)) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    }
    if (scroll) {
        return doScroll();
    }
};

onDragStart = function(drag, event) {
    if (event.button !== 0) {
        if (event.button === 1) {
            done();
        }
        return 'skip';
    } else if (scale === 1) {
        done();
        return 'skip';
    }
};

onDragStop = function(drag, event) {};

onDragMove = function(drag, event) {
    offset.add(drag.delta.times(1 / scale));
    return transform();
};

module.exports = {
    start: start,
    init: init
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiem9vbS5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQU1BLElBQUE7O0FBQUEsTUFBbUUsT0FBQSxDQUFRLEtBQVIsQ0FBbkUsRUFBRSxtQkFBRixFQUFVLGVBQVYsRUFBZ0IsZUFBaEIsRUFBc0IsaUJBQXRCLEVBQTZCLGVBQTdCLEVBQW1DLGlCQUFuQyxFQUEwQyxpQkFBMUMsRUFBaUQsZUFBakQsRUFBdUQsZUFBdkQsRUFBNkQ7O0FBRTdELEVBQUEsR0FBSyxPQUFBLENBQVEsTUFBUjs7QUFDTCxRQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBRVgsY0FBQSxHQUFpQixTQUFBO1dBQ2IsS0FBSyxDQUFDLE9BQU4sQ0FBYyxLQUFLLENBQUMsSUFBTixDQUFXLEtBQUssQ0FBQyxHQUFOLENBQVUsaUJBQVYsRUFBNkIsS0FBSyxDQUFDLE9BQU4sQ0FBYyxXQUFkLENBQTdCLENBQVgsRUFBb0UsZ0JBQXBFLENBQWQ7QUFEYTs7QUFHakIsY0FBQSxHQUFpQixTQUFBO1dBQ2IsS0FBSyxDQUFDLE9BQU4sQ0FBYyxjQUFBLENBQUEsQ0FBZDtBQURhOztBQVNqQixLQUFBLEdBQVEsU0FBQyxHQUFEOztRQUFDLE1BQUk7O0lBRVQsRUFBQSxDQUFHLFlBQUgsRUFBZ0IsY0FBQSxDQUFBLENBQWhCO1dBQ0EsWUFBQSxDQUFhLEdBQWI7QUFISTs7QUFXUixZQUFBLEdBQWUsU0FBQyxHQUFEO0FBRVgsUUFBQTtJQUFBLEVBQUEsR0FBSyxRQUFRLENBQUMsTUFBTSxDQUFDLGlCQUFoQixDQUFBLENBQW1DLENBQUMsWUFBWSxDQUFDO0lBQ3RELEVBQUEsR0FBSyxRQUFRLENBQUMsTUFBTSxDQUFDLGlCQUFoQixDQUFBLENBQW1DLENBQUMsWUFBWSxDQUFDO0lBSXRELEdBQUEsR0FBTSxJQUFJLFFBQVEsQ0FBQyxhQUFiLENBQ0Y7UUFBQSxlQUFBLEVBQWlCLFdBQWpCO1FBQ0EsV0FBQSxFQUFpQixJQURqQjtRQUVB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QSxFQUFNLEtBQU47SUFDQSxJQUFBLEVBQUssSUFETCIsInNvdXJjZXNDb250ZW50IjpbIiMgMDAwMDAwMCAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwICAgICAwMCAgXG4jICAgIDAwMCAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuIyAgIDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICBcbiMgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgXG4jIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuXG57IGNoaWxkcCwgcG9zdCwga2FyZywgc2xhc2gsIGRyYWcsIHByZWZzLCBjbGFtcCwga3Bvcywga2xvZywgJCB9ID0gcmVxdWlyZSAna3hrJ1xuXG53YyA9IHJlcXVpcmUgJy4vd2MnXG5lbGVjdHJvbiA9IHJlcXVpcmUgJ2VsZWN0cm9uJ1xuXG5zY3JlZW5zaG90UGF0aCA9IC0+XG4gICAgc2xhc2gucmVzb2x2ZSBzbGFzaC5qb2luIHByZWZzLmdldCgnc2NyZWVuaG90Rm9sZGVyJywgc2xhc2gucmVzb2x2ZSBcIn4vRGVza3RvcFwiKSwgJ3NjcmVlbnNob3QucG5nJ1xuICAgIFxuc2NyZWVuc2hvdEZpbGUgPSAtPlxuICAgIHNsYXNoLnVuc2xhc2ggc2NyZWVuc2hvdFBhdGgoKVxuICAgIFxuIyAgMDAwMDAwMCAgMDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMDAwICBcbiMgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4jIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAgICAwMDAgICAgIFxuIyAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG5cbnN0YXJ0ID0gKG9wdD17fSkgLT5cbiAgICBcbiAgICB3YyAnc2NyZWVuc2hvdCcgc2NyZWVuc2hvdEZpbGUoKVxuICAgIGNyZWF0ZVdpbmRvdyBvcHRcbiAgICBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4jIDAwMCAwIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDAgIFxuIyAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4jIDAwICAgICAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAwMCAgICAgMDAgIFxuXG5jcmVhdGVXaW5kb3cgPSAob3B0KSAtPlxuICAgIFxuICAgIHZ3ID0gZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWFTaXplLndpZHRoXG4gICAgdmggPSBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUuaGVpZ2h0XG4gICAgXG4gICAgIyBrbG9nIFwiI3t2d30gI3t2aH1cIlxuICAgIFxuICAgIHdpbiA9IG5ldyBlbGVjdHJvbi5Ccm93c2VyV2luZG93XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDAwMDAwMCdcbiAgICAgICAgdHJhbnNwYXJlbnQ6ICAgICB0cnVlXG4gICAgICAgIHByZWxvYWRXaW5kb3c6ICAgdHJ1ZVxuICAgICAgICB4OiAgICAgICAgICAgICAgIDAgXG4gICAgICAgIHk6ICAgICAgICAgICAgICAgMCBcbiAgICAgICAgd2lkdGg6ICAgICAgICAgICB2d1xuICAgICAgICBoZWlnaHQ6ICAgICAgICAgIHZoXG4gICAgICAgIGhhc1NoYWRvdzogICAgICAgZmFsc2VcbiAgICAgICAgcmVzaXphYmxlOiAgICAgICBmYWxzZVxuICAgICAgICBmcmFtZTogICAgICAgICAgIGZhbHNlXG4gICAgICAgIHRoaWNrRnJhbWU6ICAgICAgZmFsc2VcbiAgICAgICAgc2hvdzogICAgICAgICAgICB0cnVlXG4gICAgICAgIGZ1bGxzY3JlZW46ICAgICAgbm90IG9wdC5kZWJ1Z1xuICAgICAgICB3ZWJQcmVmZXJlbmNlczpcbiAgICAgICAgICAgIG5vZGVJbnRlZ3JhdGlvbjogdHJ1ZVxuICAgICAgICAgICAgd2ViU2VjdXJpdHk6ICAgICBmYWxzZVxuICAgICAgICAgICAgXG4gICAgcG5nRmlsZSA9IHNsYXNoLmZpbGVVcmwgc2NyZWVuc2hvdFBhdGgoKVxuICAgIFxuICAgIGtsb2cgJ3BuZ0ZpbGUnIHBuZ0ZpbGVcbiAgICBcbiAgICBodG1sID0gXCJcIlwiXG4gICAgICAgIDxoZWFkPlxuICAgICAgICA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+XG4gICAgICAgICAgICBib2R5IHtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogICAgICAgaGlkZGVuO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogICAgICAgICAxcHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAgICAgICAgIG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbWcge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAgICAgICBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICBsZWZ0OiAgICAgICAgICAgMDtcbiAgICAgICAgICAgICAgICB0b3A6ICAgICAgICAgICAgMDtcbiAgICAgICAgICAgICAgICB3aWR0aDogICAgICAgICAgI3t2d31weDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICAgICAgICAgI3t2aH1weDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgPC9oZWFkPlxuICAgICAgICA8Ym9keT5cbiAgICAgICAgPGltZyBjbGFzcz1cInNjcmVlbnNob3RcIiB0YWJpbmRleD0wIHNyYz1cIiN7cG5nRmlsZX1cIi8+XG4gICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgICB2YXIgcHRoID0gcHJvY2Vzcy5yZXNvdXJjZXNQYXRoICsgXCIvYXBwL2pzL3pvb20uanNcIjtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLnJlc291cmNlc1BhdGguaW5kZXhPZihcIm5vZGVfbW9kdWxlc1xcXFxcXFxcZWxlY3Ryb25cXFxcXFxcXGRpc3RcXFxcXFxcXHJlc291cmNlc1wiKT49MCkgeyBwdGggPSBwcm9jZXNzLmN3ZCgpICsgXCIvanMvem9vbS5qc1wiOyB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwdGgsIHByb2Nlc3MucmVzb3VyY2VzUGF0aCk7XG4gICAgICAgICAgICByZXF1aXJlKHB0aCkuaW5pdCgpO1xuICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgPC9ib2R5PlxuICAgIFwiXCJcIlxuXG4gICAgZGF0YSA9IFwiZGF0YTp0ZXh0L2h0bWw7Y2hhcnNldD11dGYtOCxcIiArIGVuY29kZVVSSShodG1sKSBcbiAgICB3aW4ubG9hZFVSTCBkYXRhLCBiYXNlVVJMRm9yRGF0YVVSTDpzbGFzaC5maWxlVXJsIF9fZGlybmFtZSArICcvaW5kZXguaHRtbCdcclxuXG4gICAgd2luLmRlYnVnID0gb3B0LmRlYnVnXG4gICAgXG4gICAgd2luLm9uICdyZWFkeS10by1zaG93JyAtPlxuICAgICAgICBcbiAgICBpZiBvcHQuZGVidWdcbiAgICAgICAgd2luLndlYkNvbnRlbnRzLm9wZW5EZXZUb29scygpXG4gICAgZWxzZVxuICAgICAgICB3aW4ubWF4aW1pemUoKVxuICAgIHdpblxuICAgICAgICBcbiMgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMDAwMDAwICAgIFxuIyAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAwMDAgICAgICAgXG4jIDAwMCAgMDAwIDAgMDAwICAwMDAgICAgIDAwMCAgICAgICBcbiMgMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgMDAwICAgICAgIFxuIyAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAwMDAgICAgIFxuXG5kb25lID0gLT4gXG4gICAgd2luID0gZWxlY3Ryb24ucmVtb3RlLmdldEN1cnJlbnRXaW5kb3coKVxuICAgIHdpbi5jbG9zZSgpXG4gICAgaWYgd2luLmRlYnVnIHRoZW4gZWxlY3Ryb24ucmVtb3RlLmFwcC5leGl0IDBcbiAgICAgICAgXG5pbml0ID0gLT5cbiAgICBcbiAgICB3aW4gPSBlbGVjdHJvbi5yZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpXG4gICAgXG4gICAgYSA9JCAnLnNjcmVlbnNob3QnXG4gICAgXG4gICAgYS5vbmRibGNsaWNrICAgPSBvbkRibENsaWNrXG4gICAgYS5vbm1vdXNlbW92ZSAgPSBvbk1vdXNlTW92ZVxuICAgIGEub25tb3VzZXdoZWVsID0gb25XaGVlbFxuICAgIGEub25rZXlkb3duICAgID0gZG9uZVxuICAgIFxuICAgIGlmIG5vdCB3aW4uZGVidWdcbiAgICAgICAgYS5vbmJsdXIgPSBkb25lXG4gICAgICAgIFxuICAgIG5ldyBkcmFnXG4gICAgICAgIHRhcmdldDogIGFcbiAgICAgICAgb25TdGFydDogb25EcmFnU3RhcnRcbiAgICAgICAgb25Nb3ZlOiAgb25EcmFnTW92ZVxuICAgICAgICBvblN0b3A6ICBvbkRyYWdTdG9wXG4gICAgICAgIFxuICAgIGEuZm9jdXMoKVxuXG4jIDAwMDAwMDAwMCAgMDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAgICAgIDAwICBcbiMgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuIyAgICAwMDAgICAgIDAwMDAwMDAgICAgMDAwMDAwMDAwICAwMDAgMCAwMDAgIDAwMDAwMDAgICAwMDAwMDAgICAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwMCAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgICAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICBcbiMgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwICAgICAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuXG5zY2FsZSAgPSAxLjBcbm9mZnNldCA9IGtwb3MgMCAwXG5cbnRyYW5zZm9ybSA9IC0+XG4gICAgXG4gICAgdncgPSBlbGVjdHJvbi5yZW1vdGUuc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWFTaXplLndpZHRoXG4gICAgdmggPSBlbGVjdHJvbi5yZW1vdGUuc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkud29ya0FyZWFTaXplLmhlaWdodFxuICAgIFxuICAgIGEgPSQgJy5zY3JlZW5zaG90J1xuXG4gICAgc2NhbGUgPSBjbGFtcCAxIDIwIHNjYWxlXG4gICAgXG4gICAgb3ggPSB2dyAqIChzY2FsZS0xKS8oMipzY2FsZSlcbiAgICBveSA9IHZoICogKHNjYWxlLTEpLygyKnNjYWxlKVxuICAgIG9mZnNldC54ID0gY2xhbXAgLW94LCBveCwgb2Zmc2V0LnhcbiAgICBvZmZzZXQueSA9IGNsYW1wIC1veSwgb3ksIG9mZnNldC55XG4gICAgXG4gICAgYS5zdHlsZS50cmFuc2Zvcm0gPSBcInNjYWxlWCgje3NjYWxlfSkgc2NhbGVZKCN7c2NhbGV9KSB0cmFuc2xhdGVYKCN7b2Zmc2V0Lnh9cHgpIHRyYW5zbGF0ZVkoI3tvZmZzZXQueX1weClcIlxuXG5vbkRibENsaWNrID0gKGV2ZW50KSAtPiBcbiAgICBzY2FsZSA9IDEgXG4gICAgdHJhbnNmb3JtKClcbiAgICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwICAgICAgXG4jIDAwMCAwIDAwMCAgMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgICAgIFxuIyAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAgICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgICAgXG4jIDAwICAgICAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAgIFxuXG5vbldoZWVsID0gKGV2ZW50KSAtPlxuICAgIFxuICAgIFxuICAgIHNjYWxlRmFjdG9yID0gMSAtIGV2ZW50LmRlbHRhWSAvIDQwMC4wXG4gICAgbmV3U2NhbGUgPSBjbGFtcCAxIDIwIHNjYWxlICogc2NhbGVGYWN0b3JcbiAgICBcbiAgICB2dyA9IGVsZWN0cm9uLnJlbW90ZS5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUud2lkdGhcbiAgICB2aCA9IGVsZWN0cm9uLnJlbW90ZS5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUuaGVpZ2h0XG4gICAgXG4gICAgbXAgPSBrcG9zKGV2ZW50KS5taW51cyBrcG9zKHZ3LCB2aCkudGltZXMgMC41XG4gICAgXG4gICAgb2xkUG9zID0gb2Zmc2V0LnBsdXMga3BvcyhtcCkudGltZXMgMS9zY2FsZVxuICAgIG5ld1BvcyA9IG9mZnNldC5wbHVzIGtwb3MobXApLnRpbWVzIDEvbmV3U2NhbGVcbiAgICBvZmZzZXQuYWRkIG5ld1Bvcy5taW51cyBvbGRQb3NcbiAgICBcbiAgICBzY2FsZSAqPSBzY2FsZUZhY3RvclxuICAgIFxuICAgIHRyYW5zZm9ybSgpXG4gICAgXG5ib3JkZXJUaW1lciA9IG51bGxcbm9uTW91c2VNb3ZlID0gKGV2ZW50KSAtPlxuICAgIGlmIG5vdCBib3JkZXJUaW1lclxuICAgICAgICBib3JkZXJTY3JvbGwoKVxuXG5tYXBSYW5nZSA9ICh2YWx1ZSwgdmFsdWVSYW5nZSwgdGFyZ2V0UmFuZ2UpIC0+XG4gICAgdGFyZ2V0V2lkdGggICA9IHRhcmdldFJhbmdlWzFdIC0gdGFyZ2V0UmFuZ2VbMF1cbiAgICB2YWx1ZVdpZHRoICAgID0gdmFsdWVSYW5nZVsxXSAgLSB2YWx1ZVJhbmdlWzBdXG4gICAgY2xhbXBlZFZhbHVlICA9IGNsYW1wIHZhbHVlUmFuZ2VbMF0sIHZhbHVlUmFuZ2VbMV0sIHZhbHVlXG4gICAgcmVsYXRpdmVWYWx1ZSA9IChjbGFtcGVkVmFsdWUgLSB2YWx1ZVJhbmdlWzBdKSAvIHZhbHVlV2lkdGhcbiAgICB0YXJnZXRSYW5nZVswXSArIHRhcmdldFdpZHRoICogcmVsYXRpdmVWYWx1ZVxuICAgICAgICBcbnNjcm9sbFNwZWVkID0gMFxuZG9TY3JvbGwgPSAtPlxuICAgIHRyYW5zZm9ybSgpXG4gICAgbXMgPSBtYXBSYW5nZSBzY3JvbGxTcGVlZCwgWzAgMV0sIFsxMDAwLzEwIDEwMDAvMzBdXG4gICAgYm9yZGVyVGltZXIgPSBzZXRUaW1lb3V0IGJvcmRlclNjcm9sbCwgbXNcbiAgICBcbmJvcmRlclNjcm9sbCA9IC0+XG5cbiAgICBjbGVhclRpbWVvdXQgYm9yZGVyVGltZXJcbiAgICBib3JkZXJUaW1lciA9IG51bGxcbiAgICBcbiAgICBtb3VzZVBvcyA9IGtwb3Mgd2MgJ21vdXNlJ1xuICAgIFxuICAgIHNjcm9sbCA9IGZhbHNlXG4gICAgYm9yZGVyID0gMjAwXG4gICAgXG4gICAgZGlyZWN0aW9uID0ga3Bvcyh2dyx2aCkudGltZXMoMC41KS50byhtb3VzZVBvcykubXVsKGtwb3MoMS92dywxL3ZoKSkudGltZXMoLTEpXG4gICAgXG4gICAgaWYgbW91c2VQb3MueCA8IGJvcmRlclxuICAgICAgICBzY3JvbGxTcGVlZCA9IChib3JkZXItbW91c2VQb3MueCkvYm9yZGVyXG4gICAgICAgIG9mZnNldC5hZGQgZGlyZWN0aW9uLnRpbWVzICgxLjArc2Nyb2xsU3BlZWQqMzApL3NjYWxlXG4gICAgICAgIHNjcm9sbCA9IHRydWVcbiAgICBlbHNlIGlmIG1vdXNlUG9zLnggPiB2dy1ib3JkZXJcbiAgICAgICAgc2Nyb2xsU3BlZWQgPSAoYm9yZGVyLSh2dy1tb3VzZVBvcy54KSkvYm9yZGVyXG4gICAgICAgIG9mZnNldC5hZGQgZGlyZWN0aW9uLnRpbWVzICgxLjArc2Nyb2xsU3BlZWQqMzApL3NjYWxlXG4gICAgICAgIHNjcm9sbCA9IHRydWVcbiAgICAgICAgXG4gICAgaWYgbW91c2VQb3MueSA8IGJvcmRlclxuICAgICAgICBzY3JvbGxTcGVlZCA9IChib3JkZXItbW91c2VQb3MueSkvYm9yZGVyXG4gICAgICAgIG9mZnNldC5hZGQgZGlyZWN0aW9uLnRpbWVzICgxLjArc2Nyb2xsU3BlZWQqMzApL3NjYWxlXG4gICAgICAgIHNjcm9sbCA9IHRydWVcbiAgICBlbHNlIGlmIG1vdXNlUG9zLnkgPiB2aC1ib3JkZXJcbiAgICAgICAgc2Nyb2xsU3BlZWQgPSAoYm9yZGVyLSh2aC1tb3VzZVBvcy55KSkvYm9yZGVyXG4gICAgICAgIG9mZnNldC5hZGQgZGlyZWN0aW9uLnRpbWVzICgxLjArc2Nyb2xsU3BlZWQqMzApL3NjYWxlXG4gICAgICAgIHNjcm9sbCA9IHRydWVcbiAgICAgICAgXG4gICAgaWYgc2Nyb2xsXG4gICAgICAgIGRvU2Nyb2xsKClcbiAgICBcbiMgMDAwMDAwMCAgICAwMDAwMDAwMCAgICAwMDAwMDAwICAgIDAwMDAwMDAgICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICBcbiMgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwMCAgMDAwICAwMDAwICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiMgMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICBcblxub25EcmFnU3RhcnQgPSAoZHJhZywgZXZlbnQpIC0+IFxuICAgIFxuICAgIGlmIGV2ZW50LmJ1dHRvbiAhPSAwXG4gICAgICAgIGlmIGV2ZW50LmJ1dHRvbiA9PSAxXG4gICAgICAgICAgICBkb25lKClcbiAgICAgICAgcmV0dXJuICdza2lwJ1xuICAgIGVsc2UgaWYgc2NhbGUgPT0gMVxuICAgICAgICBkb25lKClcbiAgICAgICAgcmV0dXJuICdza2lwJ1xuICAgIFxub25EcmFnU3RvcCA9IChkcmFnLCBldmVudCkgLT4gXG5vbkRyYWdNb3ZlID0gKGRyYWcsIGV2ZW50KSAtPiBcbiAgICBcbiAgICBvZmZzZXQuYWRkIGRyYWcuZGVsdGEudGltZXMgMS9zY2FsZVxuICAgIHRyYW5zZm9ybSgpXG4gICAgXG5tb2R1bGUuZXhwb3J0cyA9IFxuICAgIHN0YXJ0OnN0YXJ0XG4gICAgaW5pdDppbml0XG4gICAgXG4gICAgXG4gICAgIl19
//# sourceURL=../coffee/zoom.coffee