// koffee 1.4.0
var $, borderScroll, borderTimer, childp, clamp, createWindow, doScroll, done, drag, dragging, electron, init, karg, klog, kpos, mapRange, offset, onDblClick, onDragMove, onDragStart, onDragStop, onMouseMove, onWheel, os, post, prefs, ref, scale, screenshotFile, screenshotPath, scrollSpeed, slash, start, startScroll, taskbar, transform, wc;

ref = require('kxk'), childp = ref.childp, post = ref.post, karg = ref.karg, slash = ref.slash, drag = ref.drag, prefs = ref.prefs, clamp = ref.clamp, kpos = ref.kpos, klog = ref.klog, os = ref.os, $ = ref.$;

wc = require('./wc');

electron = require('electron');

taskbar = false;

screenshotPath = function() {
    return slash.resolve(slash.join(prefs.get('screenhotFolder', slash.resolve("~/Desktop")), 'screenshot.png'));
};

screenshotFile = function() {
    return slash.unslash(screenshotPath());
};

start = function(opt) {
    if (opt == null) {
        opt = {};
    }
    wc('screenshot', screenshotFile());
    return createWindow(opt);
};

createWindow = function(opt) {
    var data, html, pngFile, ss, win;
    ss = electron.screen.getPrimaryDisplay().size;
    win = new electron.BrowserWindow({
        backgroundColor: '#00000000',
        x: 0,
        y: 0,
        width: ss.width,
        height: ss.height,
        minWidth: ss.width,
        minHeight: ss.height,
        hasShadow: false,
        resizable: false,
        frame: false,
        thickFrame: false,
        fullscreen: false,
        transparent: true,
        preloadWindow: true,
        alwaysOnTop: true,
        enableLargerThanScreen: true,
        acceptFirstMouse: true,
        show: true,
        webPreferences: {
            nodeIntegration: true,
            webSecurity: false
        }
    });
    pngFile = slash.fileUrl(screenshotPath());
    html = "<head>\n<style type=\"text/css\">\n    body {\n        overflow:       hidden;\n        margin:         1px;\n        border:         none;\n    }\n    img {\n        position:       absolute;\n        left:           0;\n        top:            0;\n        width:          " + ss.width + "px;\n        height:         " + ss.height + "px;\n    }\n</style>\n</head>\n<body>\n<img class=\"screenshot\" tabindex=0 src=\"" + pngFile + "\"/>\n<script>\n    var pth = process.resourcesPath + \"/app/js/zoom.js\";\n    if (process.resourcesPath.indexOf(\"node_modules\\\\electron\\\\dist\\\\resources\")>=0) { pth = process.cwd() + \"/js/zoom.js\"; }\n    else if (process.resourcesPath.indexOf(\"node_modules/electron/dist/Electron.app\")>=0) { pth = process.cwd() + \"/js/zoom.js\"; }\n    //console.log(pth, process.resourcesPath);\n    require(pth).init();\n</script>\n</body>";
    data = "data:text/html;charset=utf-8," + encodeURI(html);
    win.loadURL(data, {
        baseURLForDataURL: slash.fileUrl(__dirname + '/index.html')
    });
    win.debug = opt.debug;
    win.webContents.on('dom-ready', function() {
        var info;
        if (os.platform() === 'win32') {
            info = wc('info', 'taskbar')[0];
            if (info.status !== 'hidden') {
                return post.toWin(win.id, 'taskbar', true);
            } else {
                return post.toWin(win.id, 'taskbar', false);
            }
        }
    });
    if (opt.debug) {
        win.webContents.openDevTools({
            mode: 'detach'
        });
    }
    return win;
};

done = function() {
    var win;
    win = electron.remote.getCurrentWindow();
    win.close();
    if (window.taskbar) {
        wc('taskbar', 'show');
    }
    if (win.debug) {
        return electron.remote.app.exit(0);
    }
};

init = function() {
    var a, win;
    post.on('taskbar', function(show) {
        return window.taskbar = show;
    });
    win = electron.remote.getCurrentWindow();
    a = $('.screenshot');
    a.ondblclick = onDblClick;
    a.onmousemove = onMouseMove;
    a.onmousewheel = onWheel;
    a.onkeydown = done;
    if (!win.debug) {
        a.onblur = done;
    }
    new drag({
        target: a,
        onStart: onDragStart,
        onMove: onDragMove,
        onStop: onDragStop
    });
    return a.focus();
};

scale = 1.0;

offset = kpos(0, 0);

dragging = false;

transform = function() {
    var a, ox, oy, ss;
    ss = electron.remote.screen.getPrimaryDisplay().size;
    a = $('.screenshot');
    scale = clamp(1, 20, scale);
    ox = ss.width * (scale - 1) / (2 * scale);
    oy = ss.height * (scale - 1) / (2 * scale);
    offset.x = clamp(-ox, ox, offset.x);
    offset.y = clamp(-oy, oy, offset.y);
    return a.style.transform = "scaleX(" + scale + ") scaleY(" + scale + ") translateX(" + offset.x + "px) translateY(" + offset.y + "px)";
};

onDblClick = function(event) {
    scale = 1;
    return transform();
};

onWheel = function(event) {
    var mp, newPos, newScale, oldPos, scaleFactor, ss;
    scaleFactor = 1 - event.deltaY / 400.0;
    newScale = clamp(1, 20, scale * scaleFactor);
    if (newScale === 1) {
        dragging = false;
    }
    ss = electron.remote.screen.getPrimaryDisplay().size;
    mp = kpos(event).minus(kpos(ss.width, ss.height).times(0.5));
    oldPos = offset.plus(kpos(mp).times(1 / scale));
    newPos = offset.plus(kpos(mp).times(1 / newScale));
    offset.add(newPos.minus(oldPos));
    scale *= scaleFactor;
    return transform();
};

borderTimer = null;

onMouseMove = function(event) {
    if (!borderTimer) {
        return borderScroll();
    }
};

mapRange = function(value, valueRange, targetRange) {
    var clampedValue, relativeValue, targetWidth, valueWidth;
    targetWidth = targetRange[1] - targetRange[0];
    valueWidth = valueRange[1] - valueRange[0];
    clampedValue = clamp(valueRange[0], valueRange[1], value);
    relativeValue = (clampedValue - valueRange[0]) / valueWidth;
    return targetRange[0] + targetWidth * relativeValue;
};

scrollSpeed = 0;

doScroll = function() {
    transform();
    return startScroll();
};

startScroll = function() {
    var ms;
    ms = mapRange(scrollSpeed, [0, 1], [1000 / 10, 1000 / 30]);
    return borderTimer = setTimeout(borderScroll, ms);
};

borderScroll = function() {
    var border, direction, mousePos, scroll, ss;
    clearTimeout(borderTimer);
    borderTimer = null;
    if (dragging) {
        return;
    }
    mousePos = kpos(wc('mouse'));
    scroll = false;
    border = 200;
    ss = electron.remote.screen.getPrimaryDisplay().size;
    direction = kpos(ss.width, ss.height).times(0.5).to(mousePos).mul(kpos(1 / ss.width, 1 / ss.height)).times(-1);
    if (mousePos.x < border) {
        scrollSpeed = (border - mousePos.x) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    } else if (mousePos.x > ss.width - border) {
        scrollSpeed = (border - (ss.width - mousePos.x)) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    }
    if (mousePos.y < border) {
        scrollSpeed = (border - mousePos.y) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    } else if (mousePos.y > ss.height - border) {
        scrollSpeed = (border - (ss.height - mousePos.y)) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    }
    if (scroll) {
        return doScroll();
    }
};

onDragStart = function(drag, event) {
    if (event.button !== 0) {
        if (event.button === 1) {
            done();
        }
        return 'skip';
    } else if (scale === 1) {
        done();
        return 'skip';
    }
    return dragging = true;
};

onDragStop = function(drag, event) {};

onDragMove = function(drag, event) {
    offset.add(drag.delta.times(1 / scale));
    return transform();
};

module.exports = {
    start: start,
    init: init
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiem9vbS5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQU1BLElBQUE7O0FBQUEsTUFBdUUsT0FBQSxDQUFRLEtBQVIsQ0FBdkUsRUFBRSxtQkFBRixFQUFVLGVBQVYsRUFBZ0IsZUFBaEIsRUFBc0IsaUJBQXRCLEVBQTZCLGVBQTdCLEVBQW1DLGlCQUFuQyxFQUEwQyxpQkFBMUMsRUFBaUQsZUFBakQsRUFBdUQsZUFBdkQsRUFBNkQsV0FBN0QsRUFBaUU7O0FBRWpFLEVBQUEsR0FBSyxPQUFBLENBQVEsTUFBUjs7QUFDTCxRQUFBLEdBQVcsT0FBQSxDQUFRLFVBQVI7O0FBRVgsT0FBQSxHQUFVOztBQUVWLGNBQUEsR0FBaUIsU0FBQTtXQUNiLEtBQUssQ0FBQyxPQUFOLENBQWMsS0FBSyxDQUFDLElBQU4sQ0FBVyxLQUFLLENBQUMsR0FBTixDQUFVLGlCQUFWLEVBQTZCLEtBQUssQ0FBQyxPQUFOLENBQWMsV0FBZCxDQUE3QixDQUFYLEVBQW9FLGdCQUFwRSxDQUFkO0FBRGE7O0FBR2pCLGNBQUEsR0FBaUIsU0FBQTtXQUNiLEtBQUssQ0FBQyxPQUFOLENBQWMsY0FBQSxDQUFBLENBQWQ7QUFEYTs7QUFTakIsS0FBQSxHQUFRLFNBQUMsR0FBRDs7UUFBQyxNQUFJOztJQUVULEVBQUEsQ0FBRyxZQUFILEVBQWdCLGNBQUEsQ0FBQSxDQUFoQjtXQUNBLFlBQUEsQ0FBYSxHQUFiO0FBSEk7O0FBV1IsWUFBQSxHQUFlLFNBQUMsR0FBRDtBQUVYLFFBQUE7SUFBQSxFQUFBLEdBQUssUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBaEIsQ0FBQSxDQUFtQyxDQUFDO0lBRXpDLEdBQUEsR0FBTSxJQUFJLFFBQVEsQ0FBQyxhQUFiLENBQ0Y7UUFBQSxlQUFBLEVBQXdCLFdBQXhCO1FBQ0EsQ0FBQSxFQUF3QixDQUR4QjtRQUVBLENBQUEsRUFBd0IsQ0FGeEI7UUFHQSxLQUFBLEVBQXdCLEVBQUUsQ0FBQyxLQUgzQjtR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LE1BQUgsR0FBVSxNQUExQjtRQUNELFdBQUEsR0FBYyxDQUFDLE1BQUEsR0FBTyxDQUFDLEVBQUUsQ0FBQyxNQUFILEdBQVUsUUFBUSxDQUFDLENBQXBCLENBQVIsQ0FBQSxHQUFnQztRQUM5QyxNQUFNLENBQUMsR0FBUCxDQUFXLFNBQVMsQ0FBQyxLQUFWLENBQWdCLENBQUMsR0FBQSxHQUFJLFdBQUEsR0FBWSxFQUFqQixDQUFBLEdBQXFCLEtBQXJDLENBQVg7UUFDQSxNQUFBLEdBQVMsS0FIUjs7SUFLTCxJQUFHLE1BQUg7ZUFDSSxRQUFBLENBQUEsRUFESjs7QUFsQ1c7O0FBMkNmLFdBQUEsR0FBYyxTQUFDLElBQUQsRUFBTyxLQUFQO0lBRVYsSUFBRyxLQUFLLENBQUMsTUFBTixLQUFnQixDQUFuQjtRQUNJLElBQUcsS0FBSyxDQUFDLE1BQU4sS0FBZ0IsQ0FBbkI7WUFDSSxJQUFBLENBQUEsRUFESjs7QUFFQSxlQUFPLE9BSFg7S0FBQSxNQUlLLElBQUcsS0FBQSxLQUFTLENBQVo7UUFDRCxJQUFBLENBQUE7QUFDQSxlQUFPLE9BRk47O1dBSUwsUUFBQSxHQUFXO0FBVkQ7O0FBWWQsVUFBQSxHQUFhLFNBQUMsSUFBRCxFQUFPLEtBQVAsR0FBQTs7QUFDYixVQUFBLEdBQWEsU0FBQyxJQUFELEVBQU8sS0FBUDtJQUVULE1BQU0sQ0FBQyxHQUFQLENBQVcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFYLENBQWlCLENBQUEsR0FBRSxLQUFuQixDQUFYO1dBQ0EsU0FBQSxDQUFBO0FBSFM7O0FBS2IsTUFBTSxDQUFDLE9BQVAsR0FDSTtJQUFBLEtBQUEsRUFBTSxLQUFOO0lBQ0EsSUFBQSxFQUFLLElBREwiLCJzb3VyY2VzQ29udGVudCI6WyIjIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMCAgICAgMDAgIFxuIyAgICAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiMgICAwMDAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAwMCAgXG4jICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDAgIFxuIyAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwICAgMDAwICBcblxueyBjaGlsZHAsIHBvc3QsIGthcmcsIHNsYXNoLCBkcmFnLCBwcmVmcywgY2xhbXAsIGtwb3MsIGtsb2csIG9zLCAkIH0gPSByZXF1aXJlICdreGsnXG5cbndjID0gcmVxdWlyZSAnLi93YydcbmVsZWN0cm9uID0gcmVxdWlyZSAnZWxlY3Ryb24nXG5cbnRhc2tiYXIgPSBmYWxzZVxuXG5zY3JlZW5zaG90UGF0aCA9IC0+XG4gICAgc2xhc2gucmVzb2x2ZSBzbGFzaC5qb2luIHByZWZzLmdldCgnc2NyZWVuaG90Rm9sZGVyJywgc2xhc2gucmVzb2x2ZSBcIn4vRGVza3RvcFwiKSwgJ3NjcmVlbnNob3QucG5nJ1xuICAgIFxuc2NyZWVuc2hvdEZpbGUgPSAtPlxuICAgIHNsYXNoLnVuc2xhc2ggc2NyZWVuc2hvdFBhdGgoKVxuICAgIFxuIyAgMDAwMDAwMCAgMDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMDAwICBcbiMgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4jIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgICAgICAwMDAgICAgIFxuIyAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICBcbiMgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG5cbnN0YXJ0ID0gKG9wdD17fSkgLT5cbiAgICBcbiAgICB3YyAnc2NyZWVuc2hvdCcgc2NyZWVuc2hvdEZpbGUoKVxuICAgIGNyZWF0ZVdpbmRvdyBvcHRcbiAgICBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgXG4jIDAwMCAwIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDAgIFxuIyAwMDAwMDAwMDAgIDAwMCAgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAwICBcbiMgMDAwICAgMDAwICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4jIDAwICAgICAwMCAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAgIDAwMDAwMDAgICAwMCAgICAgMDAgIFxuXG5jcmVhdGVXaW5kb3cgPSAob3B0KSAtPlxuICAgICAgICAgICAgICAgIFxuICAgIHNzID0gZWxlY3Ryb24uc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkuc2l6ZVxuICAgIFxuICAgIHdpbiA9IG5ldyBlbGVjdHJvbi5Ccm93c2VyV2luZG93XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogICAgICAgICcjMDAwMDAwMDAnXG4gICAgICAgIHg6ICAgICAgICAgICAgICAgICAgICAgIDAgXG4gICAgICAgIHk6ICAgICAgICAgICAgICAgICAgICAgIDAgXG4gICAgICAgIHdpZHRoOiAgICAgICAgICAgICAgICAgIHNzLndpZHRoXG4gICAgICAgIGhlaWdodDogICAgICAgICAgICAgICAgIHNzLmhlaWdodFxuICAgICAgICBtaW5XaWR0aDogICAgICAgICAgICAgICBzcy53aWR0aFxuICAgICAgICBtaW5IZWlnaHQ6ICAgICAgICAgICAgICBzcy5oZWlnaHRcbiAgICAgICAgaGFzU2hhZG93OiAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgcmVzaXphYmxlOiAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgZnJhbWU6ICAgICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgdGhpY2tGcmFtZTogICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgZnVsbHNjcmVlbjogICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgdHJhbnNwYXJlbnQ6ICAgICAgICAgICAgdHJ1ZVxuICAgICAgICBwcmVsb2FkV2luZG93OiAgICAgICAgICB0cnVlXG4gICAgICAgIGFsd2F5c09uVG9wOiAgICAgICAgICAgIHRydWVcbiAgICAgICAgZW5hYmxlTGFyZ2VyVGhhblNjcmVlbjogdHJ1ZVxuICAgICAgICBhY2NlcHRGaXJzdE1vdXNlOiAgICAgICB0cnVlXG4gICAgICAgIHNob3c6ICAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgd2ViUHJlZmVyZW5jZXM6XG4gICAgICAgICAgICBub2RlSW50ZWdyYXRpb246IHRydWVcbiAgICAgICAgICAgIHdlYlNlY3VyaXR5OiAgICAgZmFsc2VcbiAgICAgICAgICAgIFxuICAgIHBuZ0ZpbGUgPSBzbGFzaC5maWxlVXJsIHNjcmVlbnNob3RQYXRoKClcbiAgICBcbiAgICBodG1sID0gXCJcIlwiXG4gICAgICAgIDxoZWFkPlxuICAgICAgICA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+XG4gICAgICAgICAgICBib2R5IHtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogICAgICAgaGlkZGVuO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogICAgICAgICAxcHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAgICAgICAgIG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbWcge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAgICAgICBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICBsZWZ0OiAgICAgICAgICAgMDtcbiAgICAgICAgICAgICAgICB0b3A6ICAgICAgICAgICAgMDtcbiAgICAgICAgICAgICAgICB3aWR0aDogICAgICAgICAgI3tzcy53aWR0aH1weDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICAgICAgICAgI3tzcy5oZWlnaHR9cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICAgIDwvaGVhZD5cbiAgICAgICAgPGJvZHk+XG4gICAgICAgIDxpbWcgY2xhc3M9XCJzY3JlZW5zaG90XCIgdGFiaW5kZXg9MCBzcmM9XCIje3BuZ0ZpbGV9XCIvPlxuICAgICAgICA8c2NyaXB0PlxuICAgICAgICAgICAgdmFyIHB0aCA9IHByb2Nlc3MucmVzb3VyY2VzUGF0aCArIFwiL2FwcC9qcy96b29tLmpzXCI7XG4gICAgICAgICAgICBpZiAocHJvY2Vzcy5yZXNvdXJjZXNQYXRoLmluZGV4T2YoXCJub2RlX21vZHVsZXNcXFxcXFxcXGVsZWN0cm9uXFxcXFxcXFxkaXN0XFxcXFxcXFxyZXNvdXJjZXNcIik+PTApIHsgcHRoID0gcHJvY2Vzcy5jd2QoKSArIFwiL2pzL3pvb20uanNcIjsgfVxuICAgICAgICAgICAgZWxzZSBpZiAocHJvY2Vzcy5yZXNvdXJjZXNQYXRoLmluZGV4T2YoXCJub2RlX21vZHVsZXMvZWxlY3Ryb24vZGlzdC9FbGVjdHJvbi5hcHBcIik+PTApIHsgcHRoID0gcHJvY2Vzcy5jd2QoKSArIFwiL2pzL3pvb20uanNcIjsgfVxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhwdGgsIHByb2Nlc3MucmVzb3VyY2VzUGF0aCk7XG4gICAgICAgICAgICByZXF1aXJlKHB0aCkuaW5pdCgpO1xuICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgPC9ib2R5PlxuICAgIFwiXCJcIlxuXG4gICAgZGF0YSA9IFwiZGF0YTp0ZXh0L2h0bWw7Y2hhcnNldD11dGYtOCxcIiArIGVuY29kZVVSSShodG1sKSBcbiAgICB3aW4ubG9hZFVSTCBkYXRhLCBiYXNlVVJMRm9yRGF0YVVSTDpzbGFzaC5maWxlVXJsIF9fZGlybmFtZSArICcvaW5kZXguaHRtbCdcblxuICAgIHdpbi5kZWJ1ZyA9IG9wdC5kZWJ1Z1xuICAgIFxuICAgIHdpbi53ZWJDb250ZW50cy5vbiAnZG9tLXJlYWR5JyAtPlxuICAgICAgICBcbiAgICAgICAgaWYgb3MucGxhdGZvcm0oKSA9PSAnd2luMzInXG4gICAgICAgICAgICBpbmZvID0gd2MoJ2luZm8nICd0YXNrYmFyJylbMF1cbiAgICAgICAgICAgIGlmIGluZm8uc3RhdHVzICE9ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgcG9zdC50b1dpbiB3aW4uaWQsICd0YXNrYmFyJyB0cnVlXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcG9zdC50b1dpbiB3aW4uaWQsICd0YXNrYmFyJyBmYWxzZVxuICAgICAgICBcbiAgICBpZiBvcHQuZGVidWcgdGhlbiB3aW4ud2ViQ29udGVudHMub3BlbkRldlRvb2xzIG1vZGU6J2RldGFjaCdcbiAgICAjIHdpbi53ZWJDb250ZW50cy5vcGVuRGV2VG9vbHMgbW9kZTonZGV0YWNoJ1xuXG4gICAgd2luXG5cbiMgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAgICAgXG4jIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDAgIDAwMDAwMDAgICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgICAgIFxuIyAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMCAgXG5cbmRvbmUgPSAtPiBcbiAgICB3aW4gPSBlbGVjdHJvbi5yZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpXG4gICAgd2luLmNsb3NlKClcbiAgICBpZiB3aW5kb3cudGFza2JhclxuICAgICAgICB3YyAndGFza2JhcicgJ3Nob3cnXG4gICAgaWYgd2luLmRlYnVnIHRoZW4gZWxlY3Ryb24ucmVtb3RlLmFwcC5leGl0IDBcbiAgICBcbiMgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMDAwMDAwICAgIFxuIyAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAwMDAgICAgICAgXG4jIDAwMCAgMDAwIDAgMDAwICAwMDAgICAgIDAwMCAgICAgICBcbiMgMDAwICAwMDAgIDAwMDAgIDAwMCAgICAgMDAwICAgICAgIFxuIyAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAwMDAgICAgIFxuICAgICAgICBcbmluaXQgPSAtPlxuICAgIFxuICAgIHBvc3Qub24gJ3Rhc2tiYXInIChzaG93KSAtPiB3aW5kb3cudGFza2JhciA9IHNob3dcbiAgICBcbiAgICB3aW4gPSBlbGVjdHJvbi5yZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpXG4gICAgXG4gICAgYSA9JCAnLnNjcmVlbnNob3QnXG4gICAgXG4gICAgYS5vbmRibGNsaWNrICAgPSBvbkRibENsaWNrXG4gICAgYS5vbm1vdXNlbW92ZSAgPSBvbk1vdXNlTW92ZVxuICAgIGEub25tb3VzZXdoZWVsID0gb25XaGVlbFxuICAgIGEub25rZXlkb3duICAgID0gZG9uZVxuICAgIFxuICAgIGlmIG5vdCB3aW4uZGVidWdcbiAgICAgICAgYS5vbmJsdXIgPSBkb25lXG4gICAgICAgIFxuICAgIG5ldyBkcmFnXG4gICAgICAgIHRhcmdldDogIGFcbiAgICAgICAgb25TdGFydDogb25EcmFnU3RhcnRcbiAgICAgICAgb25Nb3ZlOiAgb25EcmFnTW92ZVxuICAgICAgICBvblN0b3A6ICBvbkRyYWdTdG9wXG4gICAgICAgIFxuICAgIGEuZm9jdXMoKVxuXG4jIDAwMDAwMDAwMCAgMDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAgICAgIDAwICBcbiMgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuIyAgICAwMDAgICAgIDAwMDAwMDAgICAgMDAwMDAwMDAwICAwMDAgMCAwMDAgIDAwMDAwMDAgICAwMDAwMDAgICAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwMCAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgICAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICBcbiMgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgMDAwICAgICAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuXG5zY2FsZSAgPSAxLjBcbm9mZnNldCA9IGtwb3MgMCAwXG5kcmFnZ2luZyA9IGZhbHNlXG5cbnRyYW5zZm9ybSA9IC0+XG4gICAgXG4gICAgc3MgPSBlbGVjdHJvbi5yZW1vdGUuc2NyZWVuLmdldFByaW1hcnlEaXNwbGF5KCkuc2l6ZVxuICAgIFxuICAgIGEgPSQgJy5zY3JlZW5zaG90J1xuXG4gICAgc2NhbGUgPSBjbGFtcCAxIDIwIHNjYWxlXG4gICAgXG4gICAgb3ggPSBzcy53aWR0aCAgKiAoc2NhbGUtMSkvKDIqc2NhbGUpXG4gICAgb3kgPSBzcy5oZWlnaHQgKiAoc2NhbGUtMSkvKDIqc2NhbGUpXG4gICAgb2Zmc2V0LnggPSBjbGFtcCAtb3gsIG94LCBvZmZzZXQueFxuICAgIG9mZnNldC55ID0gY2xhbXAgLW95LCBveSwgb2Zmc2V0LnlcbiAgICBcbiAgICBhLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGVYKCN7c2NhbGV9KSBzY2FsZVkoI3tzY2FsZX0pIHRyYW5zbGF0ZVgoI3tvZmZzZXQueH1weCkgdHJhbnNsYXRlWSgje29mZnNldC55fXB4KVwiXG5cbm9uRGJsQ2xpY2sgPSAoZXZlbnQpIC0+IFxuICAgIFxuICAgIHNjYWxlID0gMSBcbiAgICB0cmFuc2Zvcm0oKVxuICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAgICAgICBcbiMgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgICAgXG4jIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICBcbiMgMDAgICAgIDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwMDAwMCAgXG5cbm9uV2hlZWwgPSAoZXZlbnQpIC0+XG4gICAgXG4gICAgc2NhbGVGYWN0b3IgPSAxIC0gZXZlbnQuZGVsdGFZIC8gNDAwLjBcbiAgICBuZXdTY2FsZSA9IGNsYW1wIDEgMjAgc2NhbGUgKiBzY2FsZUZhY3RvclxuICAgIGlmIG5ld1NjYWxlID09IDFcbiAgICAgICAgZHJhZ2dpbmcgPSBmYWxzZVxuICAgIFxuICAgIHNzID0gZWxlY3Ryb24ucmVtb3RlLnNjcmVlbi5nZXRQcmltYXJ5RGlzcGxheSgpLnNpemVcbiAgICBcbiAgICBtcCA9IGtwb3MoZXZlbnQpLm1pbnVzIGtwb3Moc3Mud2lkdGgsIHNzLmhlaWdodCkudGltZXMgMC41XG4gICAgXG4gICAgb2xkUG9zID0gb2Zmc2V0LnBsdXMga3BvcyhtcCkudGltZXMgMS9zY2FsZVxuICAgIG5ld1BvcyA9IG9mZnNldC5wbHVzIGtwb3MobXApLnRpbWVzIDEvbmV3U2NhbGVcbiAgICBvZmZzZXQuYWRkIG5ld1Bvcy5taW51cyBvbGRQb3NcbiAgICBcbiAgICBzY2FsZSAqPSBzY2FsZUZhY3RvclxuICAgIFxuICAgIHRyYW5zZm9ybSgpXG4gICAgXG5ib3JkZXJUaW1lciA9IG51bGxcbm9uTW91c2VNb3ZlID0gKGV2ZW50KSAtPlxuICAgIGlmIG5vdCBib3JkZXJUaW1lclxuICAgICAgICBib3JkZXJTY3JvbGwoKVxuXG5tYXBSYW5nZSA9ICh2YWx1ZSwgdmFsdWVSYW5nZSwgdGFyZ2V0UmFuZ2UpIC0+XG4gICAgdGFyZ2V0V2lkdGggICA9IHRhcmdldFJhbmdlWzFdIC0gdGFyZ2V0UmFuZ2VbMF1cbiAgICB2YWx1ZVdpZHRoICAgID0gdmFsdWVSYW5nZVsxXSAgLSB2YWx1ZVJhbmdlWzBdXG4gICAgY2xhbXBlZFZhbHVlICA9IGNsYW1wIHZhbHVlUmFuZ2VbMF0sIHZhbHVlUmFuZ2VbMV0sIHZhbHVlXG4gICAgcmVsYXRpdmVWYWx1ZSA9IChjbGFtcGVkVmFsdWUgLSB2YWx1ZVJhbmdlWzBdKSAvIHZhbHVlV2lkdGhcbiAgICB0YXJnZXRSYW5nZVswXSArIHRhcmdldFdpZHRoICogcmVsYXRpdmVWYWx1ZVxuICAgICAgICBcbnNjcm9sbFNwZWVkID0gMFxuZG9TY3JvbGwgPSAtPlxuICAgIHRyYW5zZm9ybSgpXG4gICAgc3RhcnRTY3JvbGwoKVxuICAgIFxuc3RhcnRTY3JvbGwgPSAtPlxuICAgIG1zID0gbWFwUmFuZ2Ugc2Nyb2xsU3BlZWQsIFswIDFdLCBbMTAwMC8xMCAxMDAwLzMwXVxuICAgIGJvcmRlclRpbWVyID0gc2V0VGltZW91dCBib3JkZXJTY3JvbGwsIG1zXG4gIFxuYm9yZGVyU2Nyb2xsID0gLT5cblxuICAgIGNsZWFyVGltZW91dCBib3JkZXJUaW1lclxuICAgIGJvcmRlclRpbWVyID0gbnVsbFxuICAgIFxuICAgIHJldHVybiBpZiBkcmFnZ2luZ1xuICAgIFxuICAgIG1vdXNlUG9zID0ga3BvcyB3YyAnbW91c2UnXG4gICAgXG4gICAgc2Nyb2xsID0gZmFsc2VcbiAgICBib3JkZXIgPSAyMDBcbiAgICBcbiAgICBzcyA9IGVsZWN0cm9uLnJlbW90ZS5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS5zaXplXG4gICAgXG4gICAgZGlyZWN0aW9uID0ga3Bvcyhzcy53aWR0aCxzcy5oZWlnaHQpLnRpbWVzKDAuNSkudG8obW91c2VQb3MpLm11bChrcG9zKDEvc3Mud2lkdGgsMS9zcy5oZWlnaHQpKS50aW1lcygtMSlcbiAgICBcbiAgICBpZiBtb3VzZVBvcy54IDwgYm9yZGVyXG4gICAgICAgIHNjcm9sbFNwZWVkID0gKGJvcmRlci1tb3VzZVBvcy54KS9ib3JkZXJcbiAgICAgICAgb2Zmc2V0LmFkZCBkaXJlY3Rpb24udGltZXMgKDEuMCtzY3JvbGxTcGVlZCozMCkvc2NhbGVcbiAgICAgICAgc2Nyb2xsID0gdHJ1ZVxuICAgIGVsc2UgaWYgbW91c2VQb3MueCA+IHNzLndpZHRoLWJvcmRlclxuICAgICAgICBzY3JvbGxTcGVlZCA9IChib3JkZXItKHNzLndpZHRoLW1vdXNlUG9zLngpKS9ib3JkZXJcbiAgICAgICAgb2Zmc2V0LmFkZCBkaXJlY3Rpb24udGltZXMgKDEuMCtzY3JvbGxTcGVlZCozMCkvc2NhbGVcbiAgICAgICAgc2Nyb2xsID0gdHJ1ZVxuICAgICAgICBcbiAgICBpZiBtb3VzZVBvcy55IDwgYm9yZGVyXG4gICAgICAgIHNjcm9sbFNwZWVkID0gKGJvcmRlci1tb3VzZVBvcy55KS9ib3JkZXJcbiAgICAgICAgb2Zmc2V0LmFkZCBkaXJlY3Rpb24udGltZXMgKDEuMCtzY3JvbGxTcGVlZCozMCkvc2NhbGVcbiAgICAgICAgc2Nyb2xsID0gdHJ1ZVxuICAgIGVsc2UgaWYgbW91c2VQb3MueSA+IHNzLmhlaWdodC1ib3JkZXJcbiAgICAgICAgc2Nyb2xsU3BlZWQgPSAoYm9yZGVyLShzcy5oZWlnaHQtbW91c2VQb3MueSkpL2JvcmRlclxuICAgICAgICBvZmZzZXQuYWRkIGRpcmVjdGlvbi50aW1lcyAoMS4wK3Njcm9sbFNwZWVkKjMwKS9zY2FsZVxuICAgICAgICBzY3JvbGwgPSB0cnVlXG4gICAgICAgIFxuICAgIGlmIHNjcm9sbFxuICAgICAgICBkb1Njcm9sbCgpXG4gICAgXG4jIDAwMDAwMDAgICAgMDAwMDAwMDAgICAgMDAwMDAwMCAgICAwMDAwMDAwICAgXG4jIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgXG4jIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMCAgMDAwMCAgXG4jIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgXG4jIDAwMDAwMDAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAwMDAwMDAwICAgXG5cbm9uRHJhZ1N0YXJ0ID0gKGRyYWcsIGV2ZW50KSAtPiBcbiAgICBcbiAgICBpZiBldmVudC5idXR0b24gIT0gMFxuICAgICAgICBpZiBldmVudC5idXR0b24gPT0gMVxuICAgICAgICAgICAgZG9uZSgpXG4gICAgICAgIHJldHVybiAnc2tpcCdcbiAgICBlbHNlIGlmIHNjYWxlID09IDFcbiAgICAgICAgZG9uZSgpXG4gICAgICAgIHJldHVybiAnc2tpcCdcbiAgICAgICAgXG4gICAgZHJhZ2dpbmcgPSB0cnVlXG4gICAgXG5vbkRyYWdTdG9wID0gKGRyYWcsIGV2ZW50KSAtPiAjIGRyYWdnaW5nID0gZmFsc2Vcbm9uRHJhZ01vdmUgPSAoZHJhZywgZXZlbnQpIC0+IFxuICAgIFxuICAgIG9mZnNldC5hZGQgZHJhZy5kZWx0YS50aW1lcyAxL3NjYWxlXG4gICAgdHJhbnNmb3JtKClcbiAgICBcbm1vZHVsZS5leHBvcnRzID0gXG4gICAgc3RhcnQ6c3RhcnRcbiAgICBpbml0OmluaXRcbiAgICBcbiAgICAiXX0=
//# sourceURL=../coffee/zoom.coffee