// koffee 1.3.0
var $, borderScroll, borderTimer, childp, clamp, createWindow, doScroll, done, drag, electron, init, karg, kpos, mapRange, offset, onDblClick, onDragMove, onDragStart, onDragStop, onMouseMove, onWheel, post, prefs, ref, robotPos, scale, screenshotFile, scrollSpeed, slash, start, transform, vh, vw, wxw, zoomWin;

ref = require('kxk'), childp = ref.childp, post = ref.post, karg = ref.karg, slash = ref.slash, drag = ref.drag, prefs = ref.prefs, clamp = ref.clamp, kpos = ref.kpos, $ = ref.$;

electron = require('electron');

wxw = require('./wxw');

zoomWin = null;

vw = electron.screen.getPrimaryDisplay().workAreaSize.width;

vh = electron.screen.getPrimaryDisplay().workAreaSize.height;

screenshotFile = function() {
    return slash.unslash(slash.join(prefs.get('screenhotFolder', slash.resolve("~/Desktop")), 'screenshot.png'));
};

start = function(opt) {
    var pngFile, screenshotexe;
    if (opt == null) {
        opt = {};
    }
    screenshotexe = slash.unslash(slash.resolve(slash.join(__dirname, '..', 'bin', 'screenshot.exe')));
    if (!slash.isFile(screenshotexe)) {
        screenshotexe = slash.swapExt(screenshotexe, 'bat');
    }
    return pngFile = childp.exec("\"" + screenshotexe + "\" " + (screenshotFile()), function(err) {
        if (err) {
            return console.error(err);
        }
        return createWindow(opt);
    });
};

createWindow = function(opt) {
    var html, pngFile, win;
    win = new electron.BrowserWindow({
        backgroundColor: '#00000000',
        transparent: true,
        preloadWindow: true,
        x: 0,
        y: 0,
        width: vw,
        height: vh,
        hasShadow: false,
        resizable: false,
        frame: false,
        thickFrame: false,
        show: true,
        fullscreen: !opt.debug,
        webPreferences: {
            nodeIntegration: true,
            webSecurity: false
        }
    });
    zoomWin = win;
    pngFile = screenshotFile();
    html = "<head>\n<style type=\"text/css\">\n    body {\n        overflow:       hidden;\n        margin:         0;\n        border:         none;\n    }\n    #image {\n        position:       absolute;\n        left:           0;\n        top:            0;\n        width:          " + vw + "px;\n        height:         " + vh + "px;\n    }\n</style>\n</head>\n<body>\n<img id='image' tabindex=0 src=\"" + pngFile + "\"/>\n<script>\n    var pth = process.resourcesPath + \"/app/js/screenzoom.js\";\n    if (process.resourcesPath.indexOf(\"node_modules\\\\electron\\\\dist\\\\resources\")>=0) { pth = process.cwd() + \"/js/screenzoom.js\"; }\n    console.log(pth, process.resourcesPath);\n    require(pth).init();\n</script>\n</body>";
    win.loadURL("data:text/html;charset=utf-8," + encodeURI(html));
    win.debug = opt.debug;
    win.on('ready-to-show', function() {});
    if (opt.debug) {
        win.webContents.openDevTools();
    } else {
        win.maximize();
    }
    return win;
};

done = function() {
    var win;
    win = electron.remote.getCurrentWindow();
    win.close();
    if (win.debug) {
        return electron.remote.app.exit(0);
    }
};

init = function() {
    var a, win;
    post.on('slog', function(text) {
        console.log('slog', text);
        return post.toMain('winlog', text);
    });
    win = electron.remote.getCurrentWindow();
    a = $('image');
    a.ondblclick = onDblClick;
    a.onmousemove = onMouseMove;
    a.onmousewheel = onWheel;
    a.onkeydown = done;
    if (!win.debug) {
        a.onblur = done;
    }
    new drag({
        target: a,
        onStart: onDragStart,
        onMove: onDragMove,
        onStop: onDragStop
    });
    return a.focus();
};

scale = 1.0;

offset = kpos(0, 0);

transform = function() {
    var a, ox, oy;
    a = $('image');
    scale = clamp(1, 20, scale);
    ox = vw * (scale - 1) / (2 * scale);
    oy = vh * (scale - 1) / (2 * scale);
    offset.x = clamp(-ox, ox, offset.x);
    offset.y = clamp(-oy, oy, offset.y);
    return a.style.transform = "scaleX(" + scale + ") scaleY(" + scale + ") translateX(" + offset.x + "px) translateY(" + offset.y + "px)";
};

onDblClick = function(event) {
    scale = 1;
    return transform();
};

onWheel = function(event) {
    var mp, newPos, newScale, oldPos, scaleFactor;
    scaleFactor = 1 - event.deltaY / 400.0;
    newScale = clamp(1, 20, scale * scaleFactor);
    mp = kpos(event).minus(kpos(vw, vh).times(0.5));
    oldPos = offset.plus(kpos(mp).times(1 / scale));
    newPos = offset.plus(kpos(mp).times(1 / newScale));
    offset.add(newPos.minus(oldPos));
    scale *= scaleFactor;
    return transform();
};

robotPos = function() {
    return kpos(wxw.mouse());
};

borderTimer = null;

onMouseMove = function(event) {
    if (!borderTimer) {
        return borderScroll();
    }
};

mapRange = function(value, valueRange, targetRange) {
    var clampedValue, relativeValue, targetWidth, valueWidth;
    targetWidth = targetRange[1] - targetRange[0];
    valueWidth = valueRange[1] - valueRange[0];
    clampedValue = clamp(valueRange[0], valueRange[1], value);
    relativeValue = (clampedValue - valueRange[0]) / valueWidth;
    return targetRange[0] + targetWidth * relativeValue;
};

scrollSpeed = 0;

doScroll = function() {
    var ms;
    transform();
    ms = mapRange(scrollSpeed, [0, 1], [1000 / 10, 1000 / 30]);
    return borderTimer = setTimeout(borderScroll, ms);
};

borderScroll = function() {
    var border, direction, mousePos, scroll;
    clearTimeout(borderTimer);
    borderTimer = null;
    mousePos = robotPos();
    scroll = false;
    border = 200;
    direction = kpos(vw, vh).times(0.5).to(mousePos).mul(kpos(1 / vw, 1 / vh)).times(-1);
    if (mousePos.x < border) {
        scrollSpeed = (border - mousePos.x) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    } else if (mousePos.x > vw - border) {
        scrollSpeed = (border - (vw - mousePos.x)) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    }
    if (mousePos.y < border) {
        scrollSpeed = (border - mousePos.y) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    } else if (mousePos.y > vh - border) {
        scrollSpeed = (border - (vh - mousePos.y)) / border;
        offset.add(direction.times((1.0 + scrollSpeed * 30) / scale));
        scroll = true;
    }
    if (scroll) {
        return doScroll();
    }
};

onDragStart = function(drag, event) {
    if (event.button !== 0) {
        if (event.button === 1) {
            done();
        }
        return 'skip';
    } else if (scale === 1) {
        done();
        return 'skip';
    }
};

onDragStop = function(drag, event) {};

onDragMove = function(drag, event) {
    offset.add(drag.delta.times(1 / scale));
    return transform();
};

module.exports = {
    start: start,
    init: init
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyZWVuem9vbS5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQU1BLElBQUE7O0FBQUEsTUFBNkQsT0FBQSxDQUFRLEtBQVIsQ0FBN0QsRUFBRSxtQkFBRixFQUFVLGVBQVYsRUFBZ0IsZUFBaEIsRUFBc0IsaUJBQXRCLEVBQTZCLGVBQTdCLEVBQW1DLGlCQUFuQyxFQUEwQyxpQkFBMUMsRUFBaUQsZUFBakQsRUFBdUQ7O0FBRXZELFFBQUEsR0FBVyxPQUFBLENBQVEsVUFBUjs7QUFDWCxHQUFBLEdBQU0sT0FBQSxDQUFRLE9BQVI7O0FBRU4sT0FBQSxHQUFXOztBQUVYLEVBQUEsR0FBSyxRQUFRLENBQUMsTUFBTSxDQUFDLGlCQUFoQixDQUFBLENBQW1DLENBQUMsWUFBWSxDQUFDOztBQUN0RCxFQUFBLEdBQUssUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBaEIsQ0FBQSxDQUFtQyxDQUFDLFlBQVksQ0FBQzs7QUFFdEQsY0FBQSxHQUFpQixTQUFBO1dBQ2IsS0FBSyxDQUFDLE9BQU4sQ0FBYyxLQUFLLENBQUMsSUFBTixDQUFXLEtBQUssQ0FBQyxHQUFOLENBQVUsaUJBQVYsRUFBNkIsS0FBSyxDQUFDLE9BQU4sQ0FBYyxXQUFkLENBQTdCLENBQVgsRUFBb0UsZ0JBQXBFLENBQWQ7QUFEYTs7QUFTakIsS0FBQSxHQUFRLFNBQUMsR0FBRDtBQUVKLFFBQUE7O1FBRkssTUFBSTs7SUFFVCxhQUFBLEdBQWdCLEtBQUssQ0FBQyxPQUFOLENBQWMsS0FBSyxDQUFDLE9BQU4sQ0FBYyxLQUFLLENBQUMsSUFBTixDQUFXLFNBQVgsRUFBcUIsSUFBckIsRUFBMEIsS0FBMUIsRUFBZ0MsZ0JBQWhDLENBQWQsQ0FBZDtJQUVoQixJQUFHLENBQUksS0FBSyxDQUFDLE1BQU4sQ0FBYSxhQUFiLENBQVA7UUFDSSxhQUFBLEdBQWdCLEtBQUssQ0FBQyxPQUFOLENBQWMsYUFBZCxFQUE2QixLQUE3QixFQURwQjs7V0FH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LEdBQUUsS0FBbkIsQ0FBWDtXQUNBLFNBQUEsQ0FBQTtBQUhVOztBQUtkLE1BQU0sQ0FBQyxPQUFQLEdBQ0k7SUFBQSxLQUFBLEVBQU0sS0FBTjtJQUNBLElBQUEsRUFBSyxJQURMIiwic291cmNlc0NvbnRlbnQiOlsiIyAgMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMCAgICAgMDAgIFxuIyAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAwICAwMDAgICAgIDAwMCAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuIyAwMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgMCAwMDAgICAgMDAwICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMDAgIFxuIyAgICAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgIDAwMDAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgMCAwMDAgIFxuIyAwMDAwMDAwICAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIFxuXG57IGNoaWxkcCwgcG9zdCwga2FyZywgc2xhc2gsIGRyYWcsIHByZWZzLCBjbGFtcCwga3BvcywgJCB9ID0gcmVxdWlyZSAna3hrJ1xuXG5lbGVjdHJvbiA9IHJlcXVpcmUgJ2VsZWN0cm9uJ1xud3h3ID0gcmVxdWlyZSAnLi93eHcnXG5cbnpvb21XaW4gID0gbnVsbFxuXG52dyA9IGVsZWN0cm9uLnNjcmVlbi5nZXRQcmltYXJ5RGlzcGxheSgpLndvcmtBcmVhU2l6ZS53aWR0aFxudmggPSBlbGVjdHJvbi5zY3JlZW4uZ2V0UHJpbWFyeURpc3BsYXkoKS53b3JrQXJlYVNpemUuaGVpZ2h0XG5cbnNjcmVlbnNob3RGaWxlID0gLT5cbiAgICBzbGFzaC51bnNsYXNoIHNsYXNoLmpvaW4gcHJlZnMuZ2V0KCdzY3JlZW5ob3RGb2xkZXInLCBzbGFzaC5yZXNvbHZlIFwifi9EZXNrdG9wXCIpLCAnc2NyZWVuc2hvdC5wbmcnXG5cbiMgIDAwMDAwMDAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAwMCAgXG4jIDAwMCAgICAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAwMDAwMDAgIDAwMDAwMDAgICAgICAgMDAwICAgICBcbiMgICAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgXG4jIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuXG5zdGFydCA9IChvcHQ9e30pIC0+XG4gICAgXG4gICAgc2NyZWVuc2hvdGV4ZSA9IHNsYXNoLnVuc2xhc2ggc2xhc2gucmVzb2x2ZSBzbGFzaC5qb2luKF9fZGlybmFtZSwnLi4nLCdiaW4nLCdzY3JlZW5zaG90LmV4ZScpXG4gICAgXG4gICAgaWYgbm90IHNsYXNoLmlzRmlsZSBzY3JlZW5zaG90ZXhlXG4gICAgICAgIHNjcmVlbnNob3RleGUgPSBzbGFzaC5zd2FwRXh0IHNjcmVlbnNob3RleGUsICdiYXQnXG4gICAgICAgIFxuICAgIHBuZ0ZpbGUgPSBcbiAgICAgICAgXG4gICAgY2hpbGRwLmV4ZWMgXCJcXFwiI3tzY3JlZW5zaG90ZXhlfVxcXCIgI3tzY3JlZW5zaG90RmlsZSgpfVwiLCAoZXJyKSAtPiBcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBlcnJvciBlcnIgaWYgZXJyXG4gICAgICAgIGNyZWF0ZVdpbmRvdyBvcHRcblxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwICAgICAwMDAwMDAwICAgMDAwICAgMDAwICBcbiMgMDAwIDAgMDAwICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgXG4jIDAwMDAwMDAwMCAgMDAwICAwMDAgMCAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMDAgIFxuIyAwMDAgICAwMDAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiMgMDAgICAgIDAwICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAgMDAwMDAwMCAgIDAwICAgICAwMCAgXG5cbmNyZWF0ZVdpbmRvdyA9IChvcHQpIC0+XG4gICAgICAgIFxuICAgIHdpbiA9IG5ldyBlbGVjdHJvbi5Ccm93c2VyV2luZG93XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDAwMDAwMCdcbiAgICAgICAgdHJhbnNwYXJlbnQ6ICAgICB0cnVlXG4gICAgICAgIHByZWxvYWRXaW5kb3c6ICAgdHJ1ZVxuICAgICAgICB4OiAgICAgICAgICAgICAgIDAgXG4gICAgICAgIHk6ICAgICAgICAgICAgICAgMCBcbiAgICAgICAgd2lkdGg6ICAgICAgICAgICB2d1xuICAgICAgICBoZWlnaHQ6ICAgICAgICAgIHZoXG4gICAgICAgIGhhc1NoYWRvdzogICAgICAgZmFsc2VcbiAgICAgICAgcmVzaXphYmxlOiAgICAgICBmYWxzZVxuICAgICAgICBmcmFtZTogICAgICAgICAgIGZhbHNlXG4gICAgICAgIHRoaWNrRnJhbWU6ICAgICAgZmFsc2VcbiAgICAgICAgc2hvdzogICAgICAgICAgICB0cnVlXG4gICAgICAgIGZ1bGxzY3JlZW46ICAgICAgbm90IG9wdC5kZWJ1Z1xuICAgICAgICB3ZWJQcmVmZXJlbmNlczpcbiAgICAgICAgICAgIG5vZGVJbnRlZ3JhdGlvbjogdHJ1ZVxuICAgICAgICAgICAgd2ViU2VjdXJpdHk6ICAgICBmYWxzZVxuICAgICAgICAgICAgXG4gICAgem9vbVdpbiA9IHdpblxuICAgIFxuICAgIHBuZ0ZpbGUgPSBzY3JlZW5zaG90RmlsZSgpXG4gICAgICAgICAgICBcbiAgICBodG1sID0gXCJcIlwiXG4gICAgICAgIDxoZWFkPlxuICAgICAgICA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+XG4gICAgICAgICAgICBib2R5IHtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogICAgICAgaGlkZGVuO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogICAgICAgICAwO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogICAgICAgICBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgI2ltYWdlIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogICAgICAgYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgbGVmdDogICAgICAgICAgIDA7XG4gICAgICAgICAgICAgICAgdG9wOiAgICAgICAgICAgIDA7XG4gICAgICAgICAgICAgICAgd2lkdGg6ICAgICAgICAgICN7dnd9cHg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAgICAgICAgICN7dmh9cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIDwvc3R5bGU+XG4gICAgICAgIDwvaGVhZD5cbiAgICAgICAgPGJvZHk+XG4gICAgICAgIDxpbWcgaWQ9J2ltYWdlJyB0YWJpbmRleD0wIHNyYz1cIiN7cG5nRmlsZX1cIi8+XG4gICAgICAgIDxzY3JpcHQ+XG4gICAgICAgICAgICB2YXIgcHRoID0gcHJvY2Vzcy5yZXNvdXJjZXNQYXRoICsgXCIvYXBwL2pzL3NjcmVlbnpvb20uanNcIjtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzLnJlc291cmNlc1BhdGguaW5kZXhPZihcIm5vZGVfbW9kdWxlc1xcXFxcXFxcZWxlY3Ryb25cXFxcXFxcXGRpc3RcXFxcXFxcXHJlc291cmNlc1wiKT49MCkgeyBwdGggPSBwcm9jZXNzLmN3ZCgpICsgXCIvanMvc2NyZWVuem9vbS5qc1wiOyB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwdGgsIHByb2Nlc3MucmVzb3VyY2VzUGF0aCk7XG4gICAgICAgICAgICByZXF1aXJlKHB0aCkuaW5pdCgpO1xuICAgICAgICA8L3NjcmlwdD5cbiAgICAgICAgPC9ib2R5PlxuICAgIFwiXCJcIlxuXG4gICAgd2luLmxvYWRVUkwgXCJkYXRhOnRleHQvaHRtbDtjaGFyc2V0PXV0Zi04LFwiICsgZW5jb2RlVVJJKGh0bWwpIFxuICAgIHdpbi5kZWJ1ZyA9IG9wdC5kZWJ1Z1xuICAgIHdpbi5vbiAncmVhZHktdG8tc2hvdycsIC0+XG4gICAgaWYgb3B0LmRlYnVnXG4gICAgICAgIHdpbi53ZWJDb250ZW50cy5vcGVuRGV2VG9vbHMoKVxuICAgIGVsc2VcbiAgICAgICAgd2luLm1heGltaXplKClcbiAgICB3aW5cbiAgICAgICAgXG4jIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAwMDAwMCAgICBcbiMgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgMDAwICAgICAgIFxuIyAwMDAgIDAwMCAwIDAwMCAgMDAwICAgICAwMDAgICAgICAgXG4jIDAwMCAgMDAwICAwMDAwICAwMDAgICAgIDAwMCAgICAgICBcbiMgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgMDAwICAgICBcblxuZG9uZSA9IC0+IFxuICAgIHdpbiA9IGVsZWN0cm9uLnJlbW90ZS5nZXRDdXJyZW50V2luZG93KClcbiAgICB3aW4uY2xvc2UoKVxuICAgIGlmIHdpbi5kZWJ1ZyB0aGVuIGVsZWN0cm9uLnJlbW90ZS5hcHAuZXhpdCAwXG4gICAgICAgIFxuaW5pdCA9IC0+XG4gICAgXG4gICAgcG9zdC5vbiAnc2xvZycsICh0ZXh0KSAtPlxuICAgIFxuICAgICAgICBjb25zb2xlLmxvZyAnc2xvZycsIHRleHRcbiAgICAgICAgcG9zdC50b01haW4gJ3dpbmxvZycsIHRleHRcbiAgICBcbiAgICB3aW4gPSBlbGVjdHJvbi5yZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpXG4gICAgXG4gICAgYSA9JCAnaW1hZ2UnXG4gICAgYS5vbmRibGNsaWNrICAgPSBvbkRibENsaWNrXG4gICAgYS5vbm1vdXNlbW92ZSAgPSBvbk1vdXNlTW92ZVxuICAgIGEub25tb3VzZXdoZWVsID0gb25XaGVlbFxuICAgIGEub25rZXlkb3duICAgID0gZG9uZVxuICAgIGlmIG5vdCB3aW4uZGVidWdcbiAgICAgICAgYS5vbmJsdXIgPSBkb25lXG4gICAgbmV3IGRyYWdcbiAgICAgICAgdGFyZ2V0OiAgYVxuICAgICAgICBvblN0YXJ0OiBvbkRyYWdTdGFydFxuICAgICAgICBvbk1vdmU6ICBvbkRyYWdNb3ZlXG4gICAgICAgIG9uU3RvcDogIG9uRHJhZ1N0b3BcbiAgICBhLmZvY3VzKClcblxuIyAwMDAwMDAwMDAgIDAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwICAgICAwMCAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiMgICAgMDAwICAgICAwMDAwMDAwICAgIDAwMDAwMDAwMCAgMDAwIDAgMDAwICAwMDAwMDAwICAgMDAwMDAwICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICAwMDAwMDAwMDAgIFxuIyAgICAwMDAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgICAgICAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgXG4jICAgIDAwMCAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgIDAwMCAgICAgICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcblxuc2NhbGUgID0gMS4wXG5vZmZzZXQgPSBrcG9zIDAgMFxuXG50cmFuc2Zvcm0gPSAtPlxuICAgIGEgPSQgJ2ltYWdlJ1xuXG4gICAgc2NhbGUgPSBjbGFtcCAxLCAyMCwgc2NhbGVcbiAgICBcbiAgICBveCA9IHZ3ICogKHNjYWxlLTEpLygyKnNjYWxlKVxuICAgIG95ID0gdmggKiAoc2NhbGUtMSkvKDIqc2NhbGUpXG4gICAgb2Zmc2V0LnggPSBjbGFtcCAtb3gsIG94LCBvZmZzZXQueFxuICAgIG9mZnNldC55ID0gY2xhbXAgLW95LCBveSwgb2Zmc2V0LnlcbiAgICBcbiAgICBhLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGVYKCN7c2NhbGV9KSBzY2FsZVkoI3tzY2FsZX0pIHRyYW5zbGF0ZVgoI3tvZmZzZXQueH1weCkgdHJhbnNsYXRlWSgje29mZnNldC55fXB4KVwiXG5cbm9uRGJsQ2xpY2sgPSAoZXZlbnQpIC0+IFxuICAgIHNjYWxlID0gMSBcbiAgICB0cmFuc2Zvcm0oKVxuICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAwMDAgICAgICBcbiMgMDAwIDAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgICAgXG4jIDAwMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICBcbiMgMDAgICAgIDAwICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAwMDAwMCAgMDAwMDAwMCAgXG5cbm9uV2hlZWwgPSAoZXZlbnQpIC0+XG4gICAgXG4gICAgc2NhbGVGYWN0b3IgPSgxIC0gZXZlbnQuZGVsdGFZIC8gNDAwLjApXG4gICAgbmV3U2NhbGUgPSBjbGFtcCAxLCAyMCwgc2NhbGUgKiBzY2FsZUZhY3RvclxuICAgIFxuICAgIG1wID0ga3BvcyhldmVudCkubWludXMga3Bvcyh2dywgdmgpLnRpbWVzIDAuNVxuICAgIFxuICAgIG9sZFBvcyA9IG9mZnNldC5wbHVzIGtwb3MobXApLnRpbWVzIDEvc2NhbGVcbiAgICBuZXdQb3MgPSBvZmZzZXQucGx1cyBrcG9zKG1wKS50aW1lcyAxL25ld1NjYWxlXG4gICAgb2Zmc2V0LmFkZCBuZXdQb3MubWludXMgb2xkUG9zXG4gICAgXG4gICAgc2NhbGUgKj0gc2NhbGVGYWN0b3JcbiAgICB0cmFuc2Zvcm0oKVxuICAgIFxucm9ib3RQb3MgPSAtPiBcblxuICAgIGtwb3Mgd3h3Lm1vdXNlKClcbiAgICAjIHBvcyhyb2JvdC5nZXRNb3VzZVBvcygpKS5kaXYocG9zKHJvYm90LmdldFNjcmVlblNpemUoKS53aWR0aCxyb2JvdC5nZXRTY3JlZW5TaXplKCkuaGVpZ2h0KSkubXVsIHBvcyh2dyx2aClcblxuYm9yZGVyVGltZXIgPSBudWxsXG5vbk1vdXNlTW92ZSA9IChldmVudCkgLT5cbiAgICBpZiBub3QgYm9yZGVyVGltZXJcbiAgICAgICAgYm9yZGVyU2Nyb2xsKClcblxubWFwUmFuZ2UgPSAodmFsdWUsIHZhbHVlUmFuZ2UsIHRhcmdldFJhbmdlKSAtPlxuICAgIHRhcmdldFdpZHRoICAgPSB0YXJnZXRSYW5nZVsxXSAtIHRhcmdldFJhbmdlWzBdXG4gICAgdmFsdWVXaWR0aCAgICA9IHZhbHVlUmFuZ2VbMV0gIC0gdmFsdWVSYW5nZVswXVxuICAgIGNsYW1wZWRWYWx1ZSAgPSBjbGFtcCB2YWx1ZVJhbmdlWzBdLCB2YWx1ZVJhbmdlWzFdLCB2YWx1ZVxuICAgIHJlbGF0aXZlVmFsdWUgPSAoY2xhbXBlZFZhbHVlIC0gdmFsdWVSYW5nZVswXSkgLyB2YWx1ZVdpZHRoXG4gICAgdGFyZ2V0UmFuZ2VbMF0gKyB0YXJnZXRXaWR0aCAqIHJlbGF0aXZlVmFsdWVcbiAgICAgICAgXG5zY3JvbGxTcGVlZCA9IDBcbmRvU2Nyb2xsID0gLT5cbiAgICB0cmFuc2Zvcm0oKVxuICAgIG1zID0gbWFwUmFuZ2Ugc2Nyb2xsU3BlZWQsIFswLDFdLCBbMTAwMC8xMCwgMTAwMC8zMF1cbiAgICBib3JkZXJUaW1lciA9IHNldFRpbWVvdXQgYm9yZGVyU2Nyb2xsLCBtc1xuICAgIFxuYm9yZGVyU2Nyb2xsID0gLT5cblxuICAgIGNsZWFyVGltZW91dCBib3JkZXJUaW1lclxuICAgIGJvcmRlclRpbWVyID0gbnVsbFxuICAgIFxuICAgIG1vdXNlUG9zID0gcm9ib3RQb3MoKVxuICAgIFxuICAgIHNjcm9sbCA9IGZhbHNlXG4gICAgYm9yZGVyID0gMjAwXG4gICAgXG4gICAgZGlyZWN0aW9uID0ga3Bvcyh2dyx2aCkudGltZXMoMC41KS50byhtb3VzZVBvcykubXVsKGtwb3MoMS92dywxL3ZoKSkudGltZXMoLTEpXG4gICAgXG4gICAgaWYgbW91c2VQb3MueCA8IGJvcmRlclxuICAgICAgICBzY3JvbGxTcGVlZCA9IChib3JkZXItbW91c2VQb3MueCkvYm9yZGVyXG4gICAgICAgIG9mZnNldC5hZGQgZGlyZWN0aW9uLnRpbWVzICgxLjArc2Nyb2xsU3BlZWQqMzApL3NjYWxlXG4gICAgICAgIHNjcm9sbCA9IHRydWVcbiAgICBlbHNlIGlmIG1vdXNlUG9zLnggPiB2dy1ib3JkZXJcbiAgICAgICAgc2Nyb2xsU3BlZWQgPSAoYm9yZGVyLSh2dy1tb3VzZVBvcy54KSkvYm9yZGVyXG4gICAgICAgIG9mZnNldC5hZGQgZGlyZWN0aW9uLnRpbWVzICgxLjArc2Nyb2xsU3BlZWQqMzApL3NjYWxlXG4gICAgICAgIHNjcm9sbCA9IHRydWVcbiAgICAgICAgXG4gICAgaWYgbW91c2VQb3MueSA8IGJvcmRlclxuICAgICAgICBzY3JvbGxTcGVlZCA9IChib3JkZXItbW91c2VQb3MueSkvYm9yZGVyXG4gICAgICAgIG9mZnNldC5hZGQgZGlyZWN0aW9uLnRpbWVzICgxLjArc2Nyb2xsU3BlZWQqMzApL3NjYWxlXG4gICAgICAgIHNjcm9sbCA9IHRydWVcbiAgICBlbHNlIGlmIG1vdXNlUG9zLnkgPiB2aC1ib3JkZXJcbiAgICAgICAgc2Nyb2xsU3BlZWQgPSAoYm9yZGVyLSh2aC1tb3VzZVBvcy55KSkvYm9yZGVyXG4gICAgICAgIG9mZnNldC5hZGQgZGlyZWN0aW9uLnRpbWVzICgxLjArc2Nyb2xsU3BlZWQqMzApL3NjYWxlXG4gICAgICAgIHNjcm9sbCA9IHRydWVcbiAgICAgICAgXG4gICAgaWYgc2Nyb2xsXG4gICAgICAgIGRvU2Nyb2xsKClcbiAgICBcbiMgMDAwMDAwMCAgICAwMDAwMDAwMCAgICAwMDAwMDAwICAgIDAwMDAwMDAgICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICBcbiMgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMDAwMDAwMCAgMDAwICAwMDAwICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiMgMDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICBcblxub25EcmFnU3RhcnQgPSAoZHJhZywgZXZlbnQpIC0+IFxuICAgIFxuICAgIGlmIGV2ZW50LmJ1dHRvbiAhPSAwXG4gICAgICAgIGlmIGV2ZW50LmJ1dHRvbiA9PSAxXG4gICAgICAgICAgICBkb25lKClcbiAgICAgICAgcmV0dXJuICdza2lwJ1xuICAgIGVsc2UgaWYgc2NhbGUgPT0gMVxuICAgICAgICBkb25lKClcbiAgICAgICAgcmV0dXJuICdza2lwJ1xuICAgIFxub25EcmFnU3RvcCAgPSAoZHJhZywgZXZlbnQpIC0+IFxub25EcmFnTW92ZSAgPSAoZHJhZywgZXZlbnQpIC0+IFxuICAgIFxuICAgIG9mZnNldC5hZGQgZHJhZy5kZWx0YS50aW1lcyAxL3NjYWxlXG4gICAgdHJhbnNmb3JtKClcbiAgICBcbm1vZHVsZS5leHBvcnRzID0gXG4gICAgc3RhcnQ6c3RhcnRcbiAgICBpbml0OmluaXRcbiAgICAiXX0=
//# sourceURL=../coffee/screenzoom.coffee